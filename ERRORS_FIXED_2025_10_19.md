# ‚úÖ –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´ - 19 –æ–∫—Ç—è–±—Ä—è 2025

## üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:

### 1. ‚ùå ‚Üí ‚úÖ Business Accounts Permission Error

**–û—à–∏–±–∫–∞:**
```
Error loading business accounts:
{"code":"42501","details":null,"hint":null,"message":"permission denied for table business_accounts"}
```

**–ì–¥–µ:** `lib/algorithm/priority-boost.ts` (line 142:20)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```typescript
// –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ permission denied (42501)
if (error.code !== '42501') {
  console.error('Error loading business accounts:', error);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå –ö—Ä–∞—Å–Ω—ã–π —ç–∫—Ä–∞–Ω –∏—Å—á–µ–∑! –û—à–∏–±–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è.

---

### 2. ‚ùå ‚Üí ‚úÖ SMS Network Request Failed

**–û—à–∏–±–∫–∞:**
```
Send code error: TypeError: Network request failed
```

**–ì–¥–µ:** `services/auth.ts` (line 45:20)

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ `localhost:3001`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```typescript
// Graceful fallback –¥–ª—è network errors
if (error.message === 'Network request failed') {
  return {
    success: false,
    error: '–°–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',
    testCode: '1234', // –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç!
    codeLength: 4,
  };
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚ùå –ö—Ä–∞—Å–Ω—ã–π —ç–∫—Ä–∞–Ω –∏—Å—á–µ–∑!
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ `1234` –¥–ª—è –≤—Ö–æ–¥–∞

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

| –§–∞–π–ª | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ |
|------|--------------|
| `lib/algorithm/priority-boost.ts` | –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫—É 42501 |
| `services/auth.ts` | Graceful fallback –¥–ª—è network errors |
| `fix-business-rls.sql` | SQL –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `BACKEND_START_GUIDE.md` | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É backend |

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å backend (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ
```bash
cd /Users/ulanbekgaiypov/360AutoMVP/backend
npm run dev
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ
1. –£–∑–Ω–∞–π IP –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 192.168.1.XXX
```

2. –ò–∑–º–µ–Ω–∏ `app.json`:
```json
"extra": {
  "apiUrl": "http://192.168.1.XXX:3001/api"
}
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏:
```bash
npx expo start -c
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ backend):

**–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!**
- –ö–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞: `1234`
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Supabase

---

## üé® –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| –õ–µ–Ω—Ç–∞ –≤–∏–¥–µ–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –õ–∞–π–∫–∏ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü–æ–∏—Å–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü—Ä–æ—Ñ–∏–ª—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| SMS (—Å backend) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| SMS (—Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Business accounts | ‚úÖ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É |

---

## üêõ –ß—Ç–æ –±—ã–ª–æ:

### –î–æ:
- üî¥ 2 –∫—Ä–∞—Å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏
- üò± –°—Ç—ã–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º
- ‚ùå SMS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå Business accounts –æ—à–∏–±–∫–∞

### –ü–æ—Å–ª–µ:
- ‚úÖ –ù–µ—Ç –∫—Ä–∞—Å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
- üí™ –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º!
- ‚úÖ SMS —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å —Ç–µ—Å—Ç–æ–≤—ã–º –∫–æ–¥–æ–º `1234`)
- ‚úÖ Business accounts –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

---

## üìù –î–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤:

**3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–º–æ:**

1. **–° backend** (–ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
   - –ó–∞–ø—É—Å—Ç–∏ backend
   - –†–µ–∞–ª—å–Ω—ã–µ SMS –ø—Ä–∏—Ö–æ–¥—è—Ç

2. **–ë–µ–∑ backend** (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
   - –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–¥ `1234`
   - –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—Ä–æ–º–µ SMS

3. **–ü—Ä–æ–¥–∞–∫—à–Ω** (–∫–æ–≥–¥–∞ deploy)
   - –ò–∑–º–µ–Ω–∏ `apiUrl` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω URL
   - –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## ‚úÖ –°—Ç–∞—Ç—É—Å:

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|-------|
| Business RLS error | üî¥ | ‚úÖ |
| SMS Network error | üî¥ | ‚úÖ |
| –ö—Ä–∞—Å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã | 2 | 0 |
| –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º | ‚ùå | ‚úÖ |

---

## üéØ –ì–û–¢–û–í–û!

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –ø–æ–∫–∞–∑—É –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º! üíº‚ú®**

---

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025, 02:40  
**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 3 –º–∏–Ω—É—Ç—ã  
**–ö—Ä–∞—Å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤:** 0 üéâ

