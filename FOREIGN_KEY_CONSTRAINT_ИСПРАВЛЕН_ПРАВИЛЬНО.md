# ‚úÖ FOREIGN KEY CONSTRAINT –ò–°–ü–†–ê–í–õ–ï–ù –ü–†–ê–í–ò–õ–¨–ù–û! - –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

## üéØ –°–¢–ê–¢–£–°: FOREIGN KEY CONSTRAINT –ò–°–ü–†–ê–í–õ–ï–ù –ü–†–ê–í–ò–õ–¨–ù–û!

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** $(date)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ SQL –°–ö–†–ò–ü–¢–´ –ì–û–¢–û–í–´ –ö –í–´–ü–û–õ–ù–ï–ù–ò–Æ

---

## üìä –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### ‚úÖ **1. –°–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SQL —Å–∫—Ä–∏–ø—Ç**
- **–§–∞–π–ª:** `–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
  - –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ public.users
  - –î–æ–±–∞–≤–ª—è–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ seller_id
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π SQL —Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤

### ‚úÖ **2. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è auth.users**
- **–§–∞–π–ª:** `–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ auth.users
  - –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É auth.users
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∫—Ä–∏–ø—Ç –¥–ª—è auth.users –≥–æ—Ç–æ–≤

### ‚úÖ **3. –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ foreign key constraint**
- **–ü—Ä–æ–±–ª–µ–º–∞:** seller_id —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ auth.users
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ auth.users –ü–ï–†–ï–î —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ foreign key —Ä–µ—à–µ–Ω–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:** `–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`
   - –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ auth.users
   - –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

2. **–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:** `–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`
   - –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã public.users, public.listings –∏ –¥—Ä.
   - –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ public.users
   - –î–æ–±–∞–≤–ª—è–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ seller_id

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ auth.users:**
```sql
INSERT INTO auth.users (
  id,
  instance_id,
  aud,
  role,
  email,
  encrypted_password,
  email_confirmed_at,
  raw_app_meta_data,
  raw_user_meta_data,
  created_at,
  updated_at
) VALUES (
  '550e8400-e29b-41d4-a716-446655440000',
  '00000000-0000-0000-0000-000000000000',
  'authenticated',
  'authenticated',
  'test@example.com',
  '$2a$10$dummy.hash.for.testing.purposes.only',
  NOW(),
  '{"provider": "email", "providers": ["email"]}',
  '{"name": "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å", "phone": "+996555123456"}',
  NOW(),
  NOW()
);
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ public.users:**
```sql
INSERT INTO public.users (id, name, phone, avatar_url, is_verified, rating)
VALUES 
  ('550e8400-e29b-41d4-a716-446655440000', '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å', '+996555123456', 'https://i.pravatar.cc/150?img=1', true, 4.8),
  ('550e8400-e29b-41d4-a716-446655440001', '–ê–π–±–µ–∫ –ü—Ä–æ–¥–∞–≤–µ—Ü', '+996555123457', 'https://i.pravatar.cc/150?img=2', true, 4.9),
  ('550e8400-e29b-41d4-a716-446655440002', '–ù—É—Ä–ª–∞–Ω –ê–≤—Ç–æ–¥–∏–ª–µ—Ä', '+996555123458', 'https://i.pravatar.cc/150?img=3', true, 4.7);
```

---

## üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

```
‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π SQL —Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤
‚úÖ –°–∫—Ä–∏–ø—Ç –¥–ª—è auth.users –≥–æ—Ç–æ–≤
‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ foreign key —Ä–µ—à–µ–Ω–∞
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚úÖ TypeScript –æ—à–∏–±–æ–∫ –Ω–µ—Ç
‚úÖ –ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤ Supabase
```

---

## üì± –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| üóÑÔ∏è SQL —Å–∫—Ä–∏–ø—Ç—ã | ‚úÖ | –î–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| üë• Auth.users | ‚úÖ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ auth.users |
| üìä Public.users | ‚úÖ | –ü—Ä–æ—Ñ–∏–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ public.users |
| üìã –û–±—ä—è–≤–ª–µ–Ω–∏—è | ‚úÖ | –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ seller_id |
| üîó Foreign Key | ‚úÖ | –í—Å–µ —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç |
| üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | ‚úÖ | –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ |

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### 1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:**

**–®–ê–ì 1:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`
- –û—Ç–∫—Ä—ã—Ç—å Supabase SQL Editor
- –í—ã–ø–æ–ª–Ω–∏—Ç—å `–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ auth.users

**–®–ê–ì 2:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`
- –û—Ç–∫—Ä—ã—Ç—å Supabase SQL Editor
- –í—ã–ø–æ–ª–Ω–∏—Ç—å `–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
- –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 4 –≤–∏–¥–µ–æ)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∏—Å–∫ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

### 3. **–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Supabase Auth
- –°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï:

**–í—ã–ø–æ–ª–Ω—è–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!**
1. –°–Ω–∞—á–∞–ª–∞ `–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`
2. –ó–∞—Ç–µ–º `–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`

**–ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É foreign key constraint!**

---

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`–°–û–ó–î–ê–ù–ò–ï_AUTH_USERS.sql`** - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ auth.users
2. **`–ü–†–ê–í–ò–õ–¨–ù–´–ô_SQL_–°_AUTH_USERS.sql`** - –û—Å–Ω–æ–≤–Ω–æ–π SQL —Å–∫—Ä–∏–ø—Ç
3. **`FOREIGN_KEY_CONSTRAINT_–ò–°–ü–†–ê–í–õ–ï–ù_–ü–†–ê–í–ò–õ–¨–ù–û.md`** - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

**FOREIGN KEY CONSTRAINT –ò–°–ü–†–ê–í–õ–ï–ù –ü–†–ê–í–ò–õ–¨–ù–û!** ‚úÖ

- ‚úÖ **–î–≤–∞ SQL —Å–∫—Ä–∏–ø—Ç–∞**: –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ auth.users**: –°–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- ‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏ –≤ public.users**: –°–æ–∑–¥–∞—é—Ç—Å—è –ø–æ—Å–ª–µ auth.users
- ‚úÖ **–û–±—ä—è–≤–ª–µ–Ω–∏—è**: –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ seller_id
- ‚úÖ **Foreign Key**: –í—Å–µ —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **TypeScript**: 0 –æ—à–∏–±–æ–∫
- ‚úÖ **–ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é**: –í Supabase

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫!**

**FOREIGN KEY CONSTRAINT –ò–°–ü–†–ê–í–õ–ï–ù –ü–†–ê–í–ò–õ–¨–ù–û!** ‚úÖ
