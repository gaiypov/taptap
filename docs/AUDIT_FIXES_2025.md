# üîç –ê—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - 2025

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå FlashList –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤–µ–± –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** FlashList –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –≤–µ–± –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω —É—Å–ª–æ–≤–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: `FlashList` –¥–ª—è native, `FlatList` –¥–ª—è web
- –î–æ–±–∞–≤–ª–µ–Ω `getItemLayout` –¥–ª—è FlatList –Ω–∞ web –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª—ã:**
- ‚úÖ `app/(tabs)/index.tsx`

### 2. ‚ùå –ü—Ä—è–º–æ–π –∏–º–ø–æ—Ä—Ç offlineStorage.native –Ω–∞ –≤–µ–±
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `OptimizedVideoPlayer` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—Ä—è–º–æ–π –∏–º–ø–æ—Ä—Ç `offlineStorage.native`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤–µ–± –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ –æ–±—â–∏–π –∏–º–ø–æ—Ä—Ç `offlineStorage`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª —á–µ—Ä–µ–∑ Metro resolver

**–§–∞–π–ª—ã:**
- ‚úÖ `components/VideoFeed/OptimizedVideoPlayer.tsx`

### 3. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ useEffect
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤ `fetchListings` –≤–Ω—É—Ç—Ä–∏ `useEffect` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–≥–ª–æ –∑–∞–≤–∏—Å–Ω—É—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `.catch()` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è `fetchListings` –≤ `useEffect`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π `loading: false` –ø—Ä–∏ –æ—à–∏–±–∫–µ

**–§–∞–π–ª—ã:**
- ‚úÖ `app/(tabs)/index.tsx`

### 4. üîç –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω debug –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ dev —Ä–µ–∂–∏–º–µ
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ fetchListings

**–§–∞–π–ª—ã:**
- ‚úÖ `app/(tabs)/index.tsx`

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. FlashList ‚Üí FlatList –¥–ª—è web
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º FlashList –¥–ª—è native –ø–ª–∞—Ç—Ñ–æ—Ä–º, FlatList –¥–ª—è web
const VideoList = Platform.OS === 'web' ? FlatList : FlashList;
```

#### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç offlineStorage
```typescript
// –ë—ã–ª–æ:
import { getCachedVideoUrl, cacheVideoUrl } from '@/services/offlineStorage.native';

// –°—Ç–∞–ª–æ:
import { getCachedVideoUrl, cacheVideoUrl } from '@/services/offlineStorage';
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```typescript
fetchListings(activeCategory).then(() => {
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—Ö–∞
}).catch((error) => {
  appLogger.error('Error in fetchListings effect', { error, category: activeCategory });
  if (isMounted) {
    setLoading(false);
    setRefreshing(false);
  }
});
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –î–ª—è –≤–µ–± –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ "FlashList is not defined" –∏–ª–∏ –ø–æ—Ö–æ–∂–∏—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

### –î–ª—è —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ (iOS/Android):
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å Metro - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
3. –í–∏–¥–µ–æ –ª–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–≤–Ω–æ

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ platform-specific –∏–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `offlineStorage.ts` –≤–º–µ—Å—Ç–æ `offlineStorage.native.ts`)
2. **–î–ª—è —Å–ø–∏—Å–∫–æ–≤ –Ω–∞ web –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ FlatList**, FlashList –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
3. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –≤–æ –≤—Å–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ useEffect
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ finally –±–ª–æ–∫–∏** –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤–µ–± –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ iOS —Å–∏–º—É–ª—è—Ç–æ—Ä–µ
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Android —ç–º—É–ª—è—Ç–æ—Ä–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∑–∫–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

