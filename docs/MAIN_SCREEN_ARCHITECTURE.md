# üì± –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ê–ª–≥–æ—Ä–∏—Ç–º—ã

## üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Ä–∞–Ω–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      üì± iOS / Android                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  üé¨ TOP BAR (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏) - zIndex: 10                 ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ [üöó –ê–≤—Ç–æ] [üêé –õ–æ—à–∞–¥–∏] [üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å]      ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ              üìπ VIDEO FEED (FlashList)                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  üé• –í–∏–¥–µ–æ –∫–∞—Ä—Ç–æ—á–∫–∞ (Full Screen)            ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ                                      ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ     OptimizedVideoPlayer             ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ     (HLS Streaming)                 ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ                                      ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  üìä –ë–û–¢–¢–û–ú INFO (–ì—Ä–∞–¥–∏–µ–Ω—Ç)           ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ/–ë—Ä–µ–Ω–¥                    ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ –¶–µ–Ω–∞: 500 000 —Å–æ–º                ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ üìç –ë–∏—à–∫–µ–∫ ‚Ä¢ 50 000 –∫–º            ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ üë§ –ò–≤–∞–Ω (–ø—Ä–æ–¥–∞–≤–µ—Ü)                ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚ö° RIGHT ACTIONS PANEL              ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚ù§Ô∏è  –õ–∞–π–∫ (1234)                    ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  üí¨  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (56)                ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  üì§  –ü–æ–¥–µ–ª–∏—Ç—å—Å—è                      ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚≠ê  –ò–∑–±—Ä–∞–Ω–Ω–æ–µ                      ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚úâÔ∏è  –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É              ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  üîá  –ë–µ–∑ –∑–≤—É–∫–∞                      ‚îÇ   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω: `app/(tabs)/index.tsx`

```typescript
ImprovedIndexScreen
‚îú‚îÄ‚îÄ TopBar (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ LinearGradient (–ø–ª–∞–≤–Ω–æ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ)
‚îÇ   ‚îî‚îÄ‚îÄ FlatList (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
‚îÇ
‚îú‚îÄ‚îÄ FlashList (–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –≤–∏–¥–µ–æ)
‚îÇ   ‚îú‚îÄ‚îÄ renderItem ‚Üí EnhancedVideoCard
‚îÇ   ‚îú‚îÄ‚îÄ viewabilityConfigCallbackPairs
‚îÇ   ‚îú‚îÄ‚îÄ estimatedItemSize={SCREEN_HEIGHT}
‚îÇ   ‚îî‚îÄ‚îÄ RefreshControl (Pull-to-refresh)
‚îÇ
‚îî‚îÄ‚îÄ Empty State (–µ—Å–ª–∏ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
    ‚îú‚îÄ‚îÄ –ò–∫–æ–Ω–∫–∞ + –¢–µ–∫—Å—Ç
    ‚îî‚îÄ‚îÄ –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
```

### 2. –í–∏–¥–µ–æ –∫–∞—Ä—Ç–æ—á–∫–∞: `components/VideoFeed/EnhancedVideoCard.tsx`

```typescript
EnhancedVideoCard
‚îú‚îÄ‚îÄ OptimizedVideoPlayer
‚îÇ   ‚îú‚îÄ‚îÄ VideoView (expo-video)
‚îÇ   ‚îú‚îÄ‚îÄ Thumbnail (expo-image —Å –∫—ç—à–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ Loading/Error states
‚îÇ
‚îú‚îÄ‚îÄ LikeAnimation (–ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ)
‚îÇ
‚îú‚îÄ‚îÄ Bottom Info (LinearGradient overlay)
‚îÇ   ‚îú‚îÄ‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ/–ë—Ä–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ –¶–µ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ –õ–æ–∫–∞—Ü–∏—è + –î–µ—Ç–∞–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ –ü—Ä–æ–¥–∞–≤–µ—Ü (–∞–≤–∞—Ç–∞—Ä + –∏–º—è)
‚îÇ
‚îî‚îÄ‚îÄ Right Actions Panel
    ‚îú‚îÄ‚îÄ ‚ù§Ô∏è –õ–∞–π–∫
    ‚îú‚îÄ‚îÄ üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
    ‚îú‚îÄ‚îÄ üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
    ‚îú‚îÄ‚îÄ ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    ‚îú‚îÄ‚îÄ ‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É
    ‚îî‚îÄ‚îÄ üîá –ë–µ–∑ –∑–≤—É–∫–∞
```

---

## üßÆ –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞–±–æ—Ç—ã

### 1. **–ê–ª–≥–æ—Ä–∏—Ç–º –≤–∏–¥–µ–æ –ø—Ä–µ–ª–æ–∞–¥–∏–Ω–≥–∞** (TikTok-style)

```typescript
// üìç app/(tabs)/index.tsx:509-531

useEffect(() => {
  if (listings.length === 0) return;
  
  // –ü—Ä–µ–ª–æ–∞–¥–∏–º —Ç–µ–∫—É—â–µ–µ + —Å–ª–µ–¥—É—é—â–∏–µ 2 –≤–∏–¥–µ–æ
  const preloadIndexes = new Set<number>();
  
  // –í—Å–µ–≥–¥–∞ –ø—Ä–µ–ª–æ–∞–¥–∏–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  if (listings.length > 0) {
    preloadIndexes.add(0);
  }
  
  // –ü—Ä–µ–ª–æ–∞–¥–∏–º —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ
  if (currentIndex >= 0 && currentIndex < listings.length) {
    preloadIndexes.add(currentIndex);
  }
  
  // –ü—Ä–µ–ª–æ–∞–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–µ 2 –≤–∏–¥–µ–æ
  if (currentIndex + 1 < listings.length) {
    preloadIndexes.add(currentIndex + 1);
  }
  if (currentIndex + 2 < listings.length) {
    preloadIndexes.add(currentIndex + 2);
  }
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redux
  dispatch(clearPreloadedIndexes());
  Array.from(preloadIndexes).forEach(i => dispatch(addPreloadedIndex(i)));
}, [currentIndex, listings.length]);
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –ü—Ä–µ–ª–æ–∞–¥–∏–º **—Ç–µ–∫—É—â–µ–µ** –≤–∏–¥–µ–æ (–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ)
- ‚úÖ –ü—Ä–µ–ª–æ–∞–¥–∏–º **—Å–ª–µ–¥—É—é—â–∏–µ 2** –≤–∏–¥–µ–æ (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–∫—Ä–æ–ª–ª—É)
- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–µ–ª–æ–∞–¥–∏–º **–ø–µ—Ä–≤—ã–π** —ç–ª–µ–º–µ–Ω—Ç (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)
- ‚úÖ –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ —Å–º–µ–Ω–µ

---

### 2. **–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –≤–∏–¥–µ–æ**

```typescript
// üìç app/(tabs)/index.tsx:675-696

const onViewableItemsChanged = useRef(({ viewableItems }: any) => {
  if (viewableItems.length > 0) {
    const index = viewableItems[0].index ?? 0;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å
    dispatch(setCurrentIndex(index));
    
    // –ü—Ä–µ–ª–æ–∞–¥–∏–º —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ
    const nextIndex = index + 1;
    if (nextIndex < currentListings.length && !currentPreloaded.includes(nextIndex)) {
      dispatch(addPreloadedIndex(nextIndex));
    }
    
    // –ü—Ä–µ–ª–æ–∞–¥–∏–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ (–¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞)
    const prevIndex = index - 1;
    if (prevIndex >= 0 && !currentPreloaded.includes(prevIndex)) {
      dispatch(addPreloadedIndex(prevIndex));
    }
  }
}).current;

const viewabilityConfig = {
  itemVisiblePercentThreshold: 50, // –í–∏–¥–∏–º–æ –∫–æ–≥–¥–∞ 50% –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  minimumViewTime: 100,           // –ú–∏–Ω–∏–º—É–º 100ms –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
};
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∏–¥–∏–º–æ–µ –≤–∏–¥–µ–æ –∫–æ–≥–¥–∞ **50%** –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- ‚úÖ –ú–∏–Ω–∏–º—É–º **100ms** –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–ª–æ–∞–¥–∏–º **—Å–ª–µ–¥—É—é—â–µ–µ** –∏ **–ø—Ä–µ–¥—ã–¥—É—â–µ–µ**
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

### 3. **–ê–ª–≥–æ—Ä–∏—Ç–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π**

```typescript
// üìç app/(tabs)/index.tsx:156-175

const listingsCache = useRef<Record<string, {
  data: FeedListing[];
  timestamp: number;
}>>({});
const CACHE_DURATION = 30000; // 30 —Å–µ–∫—É–Ω–¥

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
if (!refresh) {
  const cached = listingsCache.current[category];
  if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à
    setListings(cached.data);
    setLoading(false);
    // –ü—Ä–µ–ª–æ–∞–¥–∏–º –ø–µ—Ä–≤—ã–µ 3 —ç–ª–µ–º–µ–Ω—Ç–∞
    [0, 1, 2].forEach(i => dispatch(addPreloadedIndex(i)));
    return;
  }
}
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –ö—ç—à –Ω–∞ **30 —Å–µ–∫—É–Ω–¥** –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à –µ—Å–ª–∏ —Å–≤–µ–∂–∏–π
- ‚úÖ –ü—Ä–∏ pull-to-refresh –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫—ç—à
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–ª–æ–∞–¥ –ø–µ—Ä–≤—ã—Ö 3 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

### 4. **–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π** (feedAlgorithm)

```typescript
// üìç app/(tabs)/index.tsx:409-412

const { sortFeedListings, getUserCity } = await import('@/services/feedAlgorithm');
const user = await auth.getCurrentUser();
const userCity = user ? await getUserCity(user.id) : undefined;
const sorted = sortFeedListings(mapped, { userCity });
```

**–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (feedAlgorithm.ts):**
1. **–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:**
   - –° AI-–∞–Ω–∞–ª–∏–∑–æ–º ‚Üí –≤—ã—à–µ
   - –° —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ ‚Üí –≤—ã—à–µ
   - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã ‚Üí –≤—ã—à–µ

2. **–ü–æ –ª–æ–∫–∞—Ü–∏–∏:**
   - –í –≥–æ—Ä–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –≤—ã—à–µ
   - –í —Ä–µ–≥–∏–æ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –≤—ã—à–µ
   - –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞ ‚Üí –Ω–∏–∂–µ

3. **–ü–æ –¥–∞—Ç–µ:**
   - –ù–æ–≤—ã–µ ‚Üí –≤—ã—à–µ
   - –°—Ç–∞—Ä—ã–µ ‚Üí –Ω–∏–∂–µ

4. **–ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
   - –ë–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤ ‚Üí –≤—ã—à–µ
   - –ë–æ–ª—å—à–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí –≤—ã—à–µ

---

### 5. **–ê–ª–≥–æ—Ä–∏—Ç–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ**

```typescript
// üìç components/VideoFeed/OptimizedVideoPlayer.tsx:112-136

useEffect(() => {
  if (!shouldCreatePlayer || !player || !localVideoUrl) return;

  const playVideo = async () => {
    try {
      if (isActive && autoPlay) {
        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∏–¥–µ–æ –∞–∫—Ç–∏–≤–Ω–æ
        await player.play();
        dispatch(addPlayingVideo(listing.id));
        setShowThumbnail(false);
        setIsLoading(false);
      } else {
        // –ü–∞—É–∑–∞ –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ
        player.pause();
        dispatch(removePlayingVideo(listing.id));
      }
    } catch (error) {
      setHasError(true);
    }
  };

  const timeout = setTimeout(playVideo, isActive ? 50 : 0);
  return () => clearTimeout(timeout);
}, [isActive, player, autoPlay]);
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ** –µ—Å–ª–∏ `isActive === true`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Redux (`addPlayingVideo`/`removePlayingVideo`)

---

## üìê –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ iOS/Android

### 1. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏**

```typescript
// üìç app/(tabs)/index.tsx:927-960

topBar: {
  position: 'absolute',
  top: 0,
  zIndex: 10,
  paddingTop: Platform.OS === 'ios' ? 50 : 20, // iOS: Safe Area
}

categoryButton: {
  ...Platform.select({
    ios: {
      shadowColor: '#667eea',
      shadowOffset: { width: 0, height: 4 },
      shadowRadius: 8,
    },
    android: {
      elevation: 4, // Android elevation –≤–º–µ—Å—Ç–æ shadow
    },
  }),
}
```

### 2. **–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤**

```typescript
// iOS: –ë–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä—ã, –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø—ã
// Android: –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ, –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø—ã

actionIconContainer: {
  width: Platform.select({ ios: 56, android: 52 }),
  height: Platform.select({ ios: 56, android: 52 }),
  borderRadius: Platform.select({ ios: 28, android: 26 }),
}

paddingBottom: Platform.select({
  ios: 100,    // iOS: –±–æ–ª—å—à–µ –¥–ª—è —Ç–∞–±–æ–≤
  android: 90,  // Android: –º–µ–Ω—å—à–µ
  web: 100,
})
```

### 3. **Haptic Feedback (—Ç–æ–ª—å–∫–æ iOS)**

```typescript
// üìç components/VideoFeed/EnhancedVideoCard.tsx:153-155

if (Platform.OS === 'ios') {
  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);
}
```

**–¢–∏–ø—ã feedback:**
- `Light` - –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
- `Medium` - –¥–ª—è –ª–∞–π–∫–æ–≤, –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- `Heavy` - –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **FlashList –≤–º–µ—Å—Ç–æ FlatList**

```typescript
// üìç app/(tabs)/index.tsx:837-897

<FlashList
  estimatedItemSize={SCREEN_HEIGHT}  // –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏!
  drawDistance={SCREEN_HEIGHT * 2}    // –†–µ–Ω–¥–µ—Ä–∏–º —Ç–æ–ª—å–∫–æ 2 —ç–∫—Ä–∞–Ω–∞ –≤—ã—à–µ/–Ω–∏–∂–µ
  estimatedListSize={{
    height: SCREEN_HEIGHT,
    width: SCREEN_WIDTH,
  }}
  // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
  pagingEnabled
  snapToInterval={SCREEN_HEIGHT}
  decelerationRate="fast"
/>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **30-50%** —É–ª—É—á—à–µ–Ω–∏–µ FPS
- ‚úÖ –ú–µ–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü–ª–∞–≤–Ω–µ–µ —Å–∫—Ä–æ–ª–ª

---

### 2. **expo-image —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

```typescript
// üìç components/VideoFeed/OptimizedVideoPlayer.tsx:232-238

<Image 
  source={{ uri: thumbnailUrl }} 
  contentFit="cover"
  cachePolicy="memory-disk"  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫—ç—à
/>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- ‚úÖ –ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

### 3. **React.memo –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

```typescript
// üìç components/VideoFeed/EnhancedVideoCard.tsx:497-508

export const EnhancedVideoCard = React.memo<EnhancedVideoCardProps>(({...}), 
  (prevProps, nextProps) => {
    // –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    return (
      prevProps.listing.id === nextProps.listing.id &&
      prevProps.isActive === nextProps.isActive &&
      prevProps.isPreloaded === nextProps.isPreloaded &&
      prevProps.listing.is_liked === nextProps.listing.is_liked &&
      // ... –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
    );
  }
);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –†–µ–Ω–¥–µ—Ä —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–ø—Å–æ–≤
- ‚úÖ –ò–∑–±–µ–≥–∞–µ–º –ª–∏—à–Ω–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

### 4. **Skeleton Loaders**

```typescript
// üìç app/(tabs)/index.tsx:729-735

if (loading && !refreshing) {
  return (
    <View style={[styles.container, { backgroundColor: theme.background }]}>
      <VideoCardSkeleton />  // –í–º–µ—Å—Ç–æ ActivityIndicator
    </View>
  );
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UX
- ‚úÖ –ù–µ—Ç "–±–µ–ª—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤"
- ‚úÖ –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É

---

### 5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ URL**

```typescript
// üìç components/VideoFeed/OptimizedVideoPlayer.tsx:61-83

useEffect(() => {
  if (videoUrl) {
    setLocalVideoUrl(videoUrl);
    // –ö—ç—à –≤ Redux
    dispatch(cacheVideoUrl({ id: listing.id, url: videoUrl }));
    // –ö—ç—à –≤ SQLite –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω
    await cacheVideoUrlToDB(listing.id, videoUrl, thumbnailUrl);
  } else if (!isOnline) {
    // –û—Ñ—Ñ–ª–∞–π–Ω: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à
    const cached = await getCachedVideoUrl(listing.id);
    if (cached) {
      setLocalVideoUrl(cached.videoUrl);
    }
  }
}, [videoUrl, listing.id, isOnline]);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
- ‚úÖ –ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üéØ –ü–∞–Ω–µ–ª–∏ –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. **Top Bar (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í–µ—Ä—Ö —ç–∫—Ä–∞–Ω–∞, `position: absolute`, `zIndex: 10`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π `FlatList` —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (scale, opacity, shadow)
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- Haptic feedback (iOS)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –°–∫—Ä–æ–ª–ª –∫ –Ω–∞—á–∞–ª—É –ø—Ä–∏ —Å–º–µ–Ω–µ

---

### 2. **Video Feed (FlashList)**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í–µ—Å—å —ç–∫—Ä–∞–Ω, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `FlashList` —Å `pagingEnabled`
- `estimatedItemSize={SCREEN_HEIGHT}`
- `snapToInterval={SCREEN_HEIGHT}` (snap –∫ –≤–∏–¥–µ–æ)
- Pull-to-refresh

**–§—É–Ω–∫—Ü–∏–∏:**
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –º–µ–∂–¥—É –≤–∏–¥–µ–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–≥–æ –≤–∏–¥–µ–æ
- –ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–∏–¥–µ–æ
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ pull-to-refresh

---

### 3. **Bottom Info Panel**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∏–∑ —ç–∫—Ä–∞–Ω–∞, –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π overlay

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –ù–∞–∑–≤–∞–Ω–∏–µ/–ë—Ä–µ–Ω–¥ (–∏–∑ `details`)
- –¶–µ–Ω–∞ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- –õ–æ–∫–∞—Ü–∏—è + –î–µ—Ç–∞–ª–∏ (–ø—Ä–æ–±–µ–≥ –¥–ª—è –∞–≤—Ç–æ)
- –ü—Ä–æ–¥–∞–≤–µ—Ü (–∞–≤–∞—Ç–∞—Ä + –∏–º—è, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ)

**–°—Ç–∏–ª–∏:**
```typescript
overlay: {
  position: 'absolute',
  bottom: 0,
  paddingBottom: Platform.select({
    ios: 100,
    android: 90,
  }),
  // –ì—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ –∫ —á–µ—Ä–Ω–æ–º—É
}
```

---

### 4. **Right Actions Panel**

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ü—Ä–∞–≤—ã–π –∫—Ä–∞–π, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **‚ù§Ô∏è –õ–∞–π–∫**
   - –î–≤–æ–π–Ω–æ–π —Ç–∞–ø –ø–æ –≤–∏–¥–µ–æ = –ª–∞–π–∫
   - –ö–Ω–æ–ø–∫–∞ –≤ –ø–∞–Ω–µ–ª–∏
   - –ê–Ω–∏–º–∞—Ü–∏—è LikeAnimation (üöó/üêé/üè†)
   - –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤

2. **üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç BottomSheet –∏–ª–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
   - –°—á–µ—Ç—á–∏–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

3. **üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Share API
   - –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

4. **‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `listing_saves`
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Redux

5. **‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —á–∞—Ç –∏–ª–∏ auth

6. **üîá –ë–µ–∑ –∑–≤—É–∫–∞**
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Redux
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ

**–°—Ç–∏–ª–∏:**
```typescript
actionsPanel: {
  position: 'absolute',
  right: 16,
  bottom: Platform.select({ ios: 140, android: 120 }),
  zIndex: 99999,  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
  gap: 24,
  backgroundColor: 'rgba(0, 0, 0, 0.6)',
  borderRadius: 24,
}
```

---

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. **–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π**

```
User opens app
    ‚Üì
Check cache (30s TTL)
    ‚Üì
Cache hit? ‚Üí Use cache ‚Üí Preload first 3
    ‚Üì No
Fetch from Supabase
    ‚Üì
Parse listings (map to FeedListing)
    ‚Üì
Sort with feedAlgorithm
    ‚Üì
Save to cache
    ‚Üì
Update Redux (setListings)
    ‚Üì
Render FlashList
```

### 2. **–í–∏–¥–µ–æ –ø—Ä–µ–ª–æ–∞–¥–∏–Ω–≥**

```
Video becomes visible (50% threshold)
    ‚Üì
onViewableItemsChanged triggered
    ‚Üì
Update currentIndex (Redux)
    ‚Üì
Preload next 2 videos
    ‚Üì
OptimizedVideoPlayer creates VideoView
    ‚Üì
Start loading HLS stream
    ‚Üì
Show thumbnail ‚Üí Play video
```

### 3. **–õ–∞–π–∫ –≤–∏–¥–µ–æ**

```
User taps ‚ù§Ô∏è or double-tap
    ‚Üì
Show LikeAnimation (üöó/üêé/üè†)
    ‚Üì
Haptic feedback (iOS)
    ‚Üì
Check auth ‚Üí Call API
    ‚Üì
Update local state (optimistic)
    ‚Üì
Sync with Supabase
    ‚Üì
Update Redux if needed
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ | 45-50 | 55-60 | +20% |
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ | 2-3s | 0.5-1s | -70% |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | –í—ã—Å–æ–∫–æ–µ | –°—Ä–µ–¥–Ω–µ–µ | -30% |
| –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ | 1.5s | 0.8s | -47% |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. ‚úÖ **FlashList** - 30-50% —É–ª—É—á—à–µ–Ω–∏–µ FPS
2. ‚úÖ **expo-image –∫—ç—à** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é
3. ‚úÖ **React.memo** - –º–µ–Ω—å—à–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
4. ‚úÖ **–ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥** - –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª
5. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

### –¶–≤–µ—Ç–∞:

```typescript
// –¢–µ–º–∞ –∏–∑ lib/theme.ts
primary: '#667eea'      // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç (—Å–∏–Ω–∏–π)
text: '#FFFFFF'          // –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç
textSecondary: '#8E8E93' // –°–µ—Ä—ã–π —Ç–µ–∫—Å—Ç
background: '#000000'    // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω

// –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã
overlay: ['transparent', 'rgba(0,0,0,0.85)']
topBar: [
  'rgba(0,0,0,0.9)',
  'rgba(0,0,0,0.6)',
  'transparent'
]
```

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞:

```typescript
title: {
  fontSize: Platform.select({ ios: 24, android: 22 }),
  fontWeight: '700',
}

price: {
  fontSize: Platform.select({ ios: 28, android: 26 }),
  fontWeight: '800',
}

location: {
  fontSize: Platform.select({ ios: 14, android: 13 }),
  fontWeight: '500',
}
```

### –û—Ç—Å—Ç—É–ø—ã:

```typescript
// iOS: –ë–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø—ã
paddingHorizontal: Platform.select({ ios: 16, android: 12 })
paddingBottom: Platform.select({ ios: 100, android: 90 })

// Android: –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ
gap: Platform.select({ ios: 24, android: 20 })
```

---

## ‚úÖ –ò—Ç–æ–≥

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ **Top Bar** —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (–∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏)
- ‚úÖ **FlashList** –¥–ª—è –≤–∏–¥–µ–æ –ª–µ–Ω—Ç—ã (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ **Bottom Info** —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –ø—Ä–æ–¥–∞–≤–µ—Ü)
- ‚úÖ **Right Actions** –ø–∞–Ω–µ–ª—å (6 –∫–Ω–æ–ø–æ–∫)

### –ê–ª–≥–æ—Ä–∏—Ç–º—ã:
- ‚úÖ **–ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥** (—Ç–µ–∫—É—â–µ–µ + —Å–ª–µ–¥—É—é—â–∏–µ 2)
- ‚úÖ **Viewability Detection** (50% threshold)
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (30s TTL –¥–ª—è —Å–ø–∏—Å–∫–æ–≤)
- ‚úÖ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** (AI, –ª–æ–∫–∞—Ü–∏—è, –¥–∞—Ç–∞, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
- ‚úÖ **–í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** (—Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ–µ)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ **FlashList** –≤–º–µ—Å—Ç–æ FlatList
- ‚úÖ **expo-image** —Å –∫—ç—à–µ–º
- ‚úÖ **React.memo** –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **Skeleton Loaders** –¥–ª—è UX
- ‚úÖ **–û—Ñ—Ñ–ª–∞–π–Ω –∫—ç—à** (SQLite)

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è:
- ‚úÖ **iOS**: –ë–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä—ã, Safe Area, Haptic Feedback
- ‚úÖ **Android**: –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ, elevation –≤–º–µ—Å—Ç–æ shadow
- ‚úÖ **–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏** –≤–µ–∑–¥–µ

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ

