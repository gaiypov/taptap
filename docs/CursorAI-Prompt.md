# 360AutoMVP - Complete Cursor AI Prompt

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Cursor AI —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

## üéØ –û –ü–†–û–ï–ö–¢–ï

–¢—ã - AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ **360 Auto Marketplace** (360AutoMVP).

**–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞:** React Native (Expo) –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** –ê–≤—Ç–æ–º–æ–±–∏–ª–∏, –õ–æ—à–∞–¥–∏, –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å  
**–§–æ—Ä–º–∞—Ç:** TikTok-style –≤–∏–¥–µ–æ –ª–µ–Ω—Ç–∞ + –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å  
**Stack:** TypeScript, Expo Router, Supabase, AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üìÅ –ö–†–ò–¢–ò–ß–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### ‚úÖ –ê–ö–¢–ò–í–ù–´–ï –ü–ê–ü–ö–ò (–∏—Å–ø–æ–ª—å–∑—É–π –ò–•)

```

360AutoMVP/

‚îú‚îÄ‚îÄ app/                    # Expo Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã - –û–°–ù–û–í–ù–ê–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ê

‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # –ù–∞–≤–∏–≥–∞—Ü–∏—è: index, search, upload, favorites, profile

‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

‚îÇ   ‚îú‚îÄ‚îÄ car/[id].tsx       # –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

‚îÇ   ‚îî‚îÄ‚îÄ chat/              # –ß–∞—Ç—ã

‚îÇ

‚îú‚îÄ‚îÄ components/             # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –¥–æ–º–µ–Ω–∞–º

‚îÇ   ‚îú‚îÄ‚îÄ Auth/              # SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

‚îÇ   ‚îú‚îÄ‚îÄ VideoFeed/         # –í–∏–¥–µ–æ –ª–µ–Ω—Ç–∞

‚îÇ   ‚îú‚îÄ‚îÄ Upload/            # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

‚îÇ   ‚îú‚îÄ‚îÄ Comments/          # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

‚îÇ   ‚îî‚îÄ‚îÄ common/            # –û–±—â–∏–µ

‚îÇ

‚îú‚îÄ‚îÄ services/              # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã

‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ö–†–ò–¢–ò–ß–ù–´–ô)

‚îÇ   ‚îú‚îÄ‚îÄ apiVideo.ts       # –í–∏–¥–µ–æ —Ö–æ—Å—Ç–∏–Ω–≥ (–ö–†–ò–¢–ò–ß–ù–´–ô)

‚îÇ   ‚îú‚îÄ‚îÄ sms.ts            # SMS nikita.kg (–ö–†–ò–¢–ò–ß–ù–´–ô)

‚îÇ   ‚îú‚îÄ‚îÄ ai/               # AI —Å–µ—Ä–≤–∏—Å—ã (–ö–†–ò–¢–ò–ß–ù–´–ô)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai.ts    # OpenAI GPT

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ claude.ts    # Claude AI

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google.ts    # Google Vision

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ yolo.ts      # YOLO –¥–µ—Ç–µ–∫—Ü–∏—è

‚îÇ   ‚îî‚îÄ‚îÄ storage.ts        # AsyncStorage

‚îÇ

‚îú‚îÄ‚îÄ backend/               # Express API

‚îÇ   ‚îú‚îÄ‚îÄ api/              # –†–æ—É—Ç—ã

‚îÇ   ‚îî‚îÄ‚îÄ services/         # Backend —Å–µ—Ä–≤–∏—Å—ã

‚îÇ

‚îî‚îÄ‚îÄ types/                 # TypeScript —Ç–∏–ø—ã

```

### ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô –≠–¢–ò –ü–ê–ü–ö–ò

```

360-auto/                  # ‚ùå –£–°–¢–ê–†–ï–í–®–ê–Ø - –ù–ï –¢–†–û–ì–ê–ô

360auto-marketplace/       # ‚ö†Ô∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

```

---

## üî• –ì–õ–ê–í–ù–´–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ)

### 1. üóÑÔ∏è SUPABASE - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + Auth + Storage

**–§–∞–π–ª:** `services/supabase.ts`

**–¢–∞–±–ª–∏—Ü—ã:**

```typescript

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

cars              // –ê–≤—Ç–æ–º–æ–±–∏–ª–∏

horses            // –õ–æ—à–∞–¥–∏  

real_estate       // –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å



// –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

users             // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

likes             // –õ–∞–π–∫–∏ (listing_id, user_id, listing_type)

favorites         // –ò–∑–±—Ä–∞–Ω–Ω–æ–µ

comments          // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –æ—Ç–≤–µ—Ç–∞–º–∏

conversations     // –ß–∞—Ç—ã

messages          // –°–æ–æ–±—â–µ–Ω–∏—è



// –ë–∏–∑–Ω–µ—Å

business_accounts // –¢–∞—Ä–∏—Ñ—ã: FREE/LITE/BUSINESS/PRO

promotions        // Boost –æ–±—ä—è–≤–ª–µ–Ω–∏–π

```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

```typescript

import { supabase } from '@/services/supabase';



// –ß—Ç–µ–Ω–∏–µ

const { data, error } = await supabase

  .from('cars')

  .select('*, users(full_name, avatar_url)')

  .eq('status', 'active')

  .limit(20);



// –°–æ–∑–¥–∞–Ω–∏–µ

const { data, error } = await supabase

  .from('cars')

  .insert({ title: 'BMW X5', price: 2500000, ... });



// Real-time –ø–æ–¥–ø–∏—Å–∫–∞

supabase

  .from('messages')

  .on('INSERT', handleNewMessage)

  .subscribe();

```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**

- –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π `error`

- –ò—Å–ø–æ–ª—å–∑—É–π RLS (Row Level Security)

- –ü—Ä–æ–≤–µ—Ä—è–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é: `supabase.auth.getUser()`

---

### 2. üé• API.VIDEO - –í–∏–¥–µ–æ —Ö–æ—Å—Ç–∏–Ω–≥

**–§–∞–π–ª:** `services/apiVideo.ts`

**–ó–∞—á–µ–º:** –í—Å–µ –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ api.video (–ù–ï –≤ Supabase Storage)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

```typescript

import { uploadVideoToApiVideo } from '@/services/apiVideo';



// –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

const videoUrl = await uploadVideoToApiVideo(localVideoUri, {

  title: listing.title,

  tags: ['cars', listing.make],

});



// –°–æ—Ö—Ä–∞–Ω—è–µ–º URL –≤ –ë–î

await supabase.from('cars').update({ 

  video_url: videoUrl  // HLS streaming URL

});

```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**

- –í—Å–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ api.video (–Ω–µ Supabase Storage)

- –ü–æ–ª—É—á–∞–µ—à—å HLS URL –¥–ª—è –ø–ª–µ–µ—Ä–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ thumbnails

---

### 3. üì± SMS (nikita.kg) - SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª—ã:**

- `services/sms.ts` - –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- `services/smsReal.ts` - —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

- `services/smsTest.ts` - —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

```typescript

import { sendSMS } from '@/services/sms';



// –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞

await sendSMS('+996555123456', '–í–∞—à –∫–æ–¥: 123456');

```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**

- –§–æ—Ä–º–∞—Ç: +996 –¥–ª—è –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞

- Rate limit: 3 –ø–æ–ø—ã—Ç–∫–∏ / 10 –º–∏–Ω—É—Ç

- –ö–æ–¥: 6 —Ü–∏—Ñ—Ä, TTL 5 –º–∏–Ω—É—Ç

---

### 4. ü§ñ AI –°–ï–†–í–ò–°–´ (4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)

**–ü–∞–ø–∫–∞:** `services/ai/`

#### 4.1 OpenAI GPT

```typescript

import { analyzeWithOpenAI } from '@/services/ai/openai';



const description = await analyzeWithOpenAI({

  prompt: '–°–æ–∑–¥–∞–π –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è BMW X5 2020',

  maxTokens: 150,

});

```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π

- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤

- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### 4.2 Claude AI (Anthropic)

```typescript

import { analyzeWithClaude } from '@/services/ai/claude';



const analysis = await analyzeWithClaude({

  context: '–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –∞–≤—Ç–æ',

  task: '–û—Ü–µ–Ω–∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—É—é —Ü–µ–Ω—É',

});

```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –°–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏–∑

- –ö–æ–≥–¥–∞ GPT-4 –¥–æ—Ä–æ–≥–æ

- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑

#### 4.3 Google Vision API

```typescript

import { analyzeImageWithGoogle } from '@/services/ai/google';



const labels = await analyzeImageWithGoogle(imageUri);

// Returns: ['car', 'bmw', 'sedan', 'black']

```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤

- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ñ–æ—Ç–æ

#### 4.4 YOLO (–¥–µ—Ç–µ–∫—Ü–∏—è)

```typescript

import { detectWithYolo } from '@/services/ai/yolo';



const objects = await detectWithYolo(imageUri);

```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –ë—ã—Å—Ç—Ä–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è

- –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:**

```typescript

import { useTestMode } from '@/services/ai/testMode';



// –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ API –∫–ª—é—á–µ–π

const result = await useTestMode('openai', mockData);

```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**

- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π try-catch

- –ú–∞–∫—Å–∏–º—É–º 5 AI –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ

- –ö—ç—à–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- Fallback –Ω–∞ testMode –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üéØ –ü–†–ê–í–ò–õ–ê –†–ê–ó–†–ê–ë–û–¢–ö–ò

### 1. –ò–ú–ü–û–†–¢–´

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:**

```typescript

import { supabase } from '@/services/supabase';

import MyComponent from '@/components/Auth/PhoneInput';

import { Listing } from '@/types';

import { useRouter } from 'expo-router';

```

‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```typescript

import ... from '../360-auto/...'        // –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –ø–∞–ø–∫–∞

import ... from '../../services/...'     // –ò—Å–ø–æ–ª—å–∑—É–π @ alias

```

### 2. –°–¢–†–£–ö–¢–£–†–ê –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

```typescript

import React, { useState, useEffect } from 'react';

import { View, Text, StyleSheet } from 'react-native';

import { supabase } from '@/services/supabase';



interface Props {

  listing: Listing;

  onPress?: () => void;

}



export default function MyComponent({ listing, onPress }: Props) {

  const [loading, setLoading] = useState(false);

  

  useEffect(() => {

    fetchData();

  }, []);

  

  const fetchData = async () => {

    try {

      setLoading(true);

      const { data, error } = await supabase.from('cars').select('*');

      if (error) throw error;

      // handle data

    } catch (error) {

      console.error('Error:', error);

    } finally {

      setLoading(false);

    }

  };

  

  return (

    <View style={styles.container}>

      <Text>{listing.title}</Text>

    </View>

  );

}



const styles = StyleSheet.create({

  container: {

    flex: 1,

    padding: 16,

  },

});

```

### 3. –ù–ê–í–ò–ì–ê–¶–ò–Ø (Expo Router)

```typescript

import { useRouter } from 'expo-router';



const router = useRouter();



// –ü–µ—Ä–µ—Ö–æ–¥—ã

router.push('/car/123');           // –î–µ—Ç–∞–ª–∏

router.push('/chat/456');          // –ß–∞—Ç

router.push('/profile/789');       // –ü—Ä–æ—Ñ–∏–ª—å

router.back();                     // –ù–∞–∑–∞–¥

```

### 4. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

```typescript

const handleAction = async () => {

  try {

    setLoading(true);

    

    // Supabase –∑–∞–ø—Ä–æ—Å

    const { data, error } = await supabase

      .from('cars')

      .select('*');

    

    if (error) throw error;

    

    // AI –∑–∞–ø—Ä–æ—Å —Å fallback

    try {

      const analysis = await analyzeWithOpenAI(data);

      setAnalysis(analysis);

    } catch (aiError) {

      console.log('AI failed, using fallback');

      const fallback = await useTestMode('openai', data);

      setAnalysis(fallback);

    }

    

  } catch (error) {

    console.error('Error:', error);

    Alert.alert('–û—à–∏–±–∫–∞', '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫');

  } finally {

    setLoading(false);

  }

};

```

### 5. PERFORMANCE

```typescript

// React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

const VideoCard = React.memo(({ listing }: Props) => {

  return <View>...</View>;

});



// useMemo –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

const filtered = useMemo(() => {

  return listings.filter(l => l.category === category);

}, [listings, category]);



// useCallback –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π

const handleLike = useCallback(async () => {

  // ...

}, [listingId]);

```

---

## üóÇÔ∏è –ö–ê–¢–ï–ì–û–†–ò–ò –¢–û–í–ê–†–û–í

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```typescript

// –ê–≤—Ç–æ

interface Car {

  id: string;

  title: string;

  make: string;          // –ú–∞—Ä–∫–∞: BMW, Mercedes, Toyota

  model: string;         // –ú–æ–¥–µ–ª—å: X5, E-Class, Camry

  year: number;          // –ì–æ–¥: 2020

  mileage: number;       // –ü—Ä–æ–±–µ–≥: 50000

  price: number;         // –¶–µ–Ω–∞: 2500000

  condition: 'new' | 'used';

  transmission: 'auto' | 'manual';

  fuel_type: string;

  color: string;

  city: string;

  video_url: string;     // HLS URL –æ—Ç api.video

  thumbnail_url?: string;

  status: 'active' | 'sold' | 'expired';

  user_id: string;

  likes_count: number;

  views_count: number;

}



// –õ–æ—à–∞–¥–∏

interface Horse {

  id: string;

  title: string;

  breed: string;         // –ü–æ—Ä–æ–¥–∞

  age: number;           // –í–æ–∑—Ä–∞—Å—Ç

  gender: 'male' | 'female';

  color: string;

  price: number;

  city: string;

  video_url: string;

  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

}



// –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å

interface RealEstate {

  id: string;

  title: string;

  property_type: 'apartment' | 'house' | 'land';

  area: number;          // –ü–ª–æ—â–∞–¥—å –º¬≤

  rooms: number;

  floor: number;

  price: number;

  city: string;

  video_url: string;

  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

}

```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π

```typescript

const CATEGORIES = [

  { id: 'all', name: '–í—Å–µ', icon: 'üî•', table: 'cars' },

  { id: 'cars', name: '–ê–≤—Ç–æ', icon: 'üöó', table: 'cars' },

  { id: 'horses', name: '–õ–æ—à–∞–¥–∏', icon: 'üê¥', table: 'horses' },

  { id: 'real_estate', name: '–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å', icon: 'üè†', table: 'real_estate' },

];

```

---

## üé® UI/UX –°–¢–ê–ù–î–ê–†–¢–´

### –¶–≤–µ—Ç–∞

```typescript

const COLORS = {

  primary: '#FF3B30',      // –ö—Ä–∞—Å–Ω—ã–π

  secondary: '#007AFF',    // –°–∏–Ω–∏–π

  success: '#34C759',      // –ó–µ–ª–µ–Ω—ã–π

  warning: '#FF9500',      // –û—Ä–∞–Ω–∂–µ–≤—ã–π

  background: '#000',      // –ß–µ—Ä–Ω—ã–π

  surface: '#1C1C1E',      // –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π

  text: '#FFF',            // –ë–µ–ª—ã–π

  textSecondary: '#8E8E93', // –°–µ—Ä—ã–π

};

```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```typescript

// LinearGradient –¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö —Ñ–æ–Ω–æ–≤

import { LinearGradient } from 'expo-linear-gradient';



<LinearGradient

  colors={['#FF3B30', '#FF6B58']}

  style={styles.header}

>

  {/* content */}

</LinearGradient>



// Haptic feedback

import * as Haptics from 'expo-haptics';



onPress={() => {

  Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);

  handleAction();

}}



// –ò–∫–æ–Ω–∫–∏ (—ç–º–æ–¥–∑–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ)

<Text style={styles.icon}>üöó</Text>

<Text style={styles.icon}>‚ù§Ô∏è</Text>

<Text style={styles.icon}>‚≠ê</Text>

```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

const { data: { user }, error } = await supabase.auth.getUser();



if (!user) {

  router.replace('/(auth)/login');

  return;

}



// –î–µ–π—Å—Ç–≤–∏—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

await supabase

  .from('cars')

  .insert({ ...data, user_id: user.id });

```

### RLS (Row Level Security)

```sql

-- –ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏

CREATE POLICY "Users can update own listings"

ON cars FOR UPDATE

USING (auth.uid() = user_id);

```

### –í–∞–ª–∏–¥–∞—Ü–∏—è

```typescript

// –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

if (!title || title.length < 3) {

  Alert.alert('–û—à–∏–±–∫–∞', '–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ');

  return;

}



if (price < 0) {

  Alert.alert('–û—à–∏–±–∫–∞', '–¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π');

  return;

}

```

---

## üìä REAL-TIME –§–£–ù–ö–¶–ò–û–ù–ê–õ

```typescript

useEffect(() => {

  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ –ª–∞–π–∫–∏

  const subscription = supabase

    .from('likes')

    .on('INSERT', (payload) => {

      if (payload.new.listing_id === listing.id) {

        setLikesCount(prev => prev + 1);

      }

    })

    .subscribe();

  

  return () => {

    subscription.unsubscribe();

  };

}, [listing.id]);

```

---

## üé¨ –í–ò–î–ï–û –û–ë–†–ê–ë–û–¢–ö–ê

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

```typescript

import { uploadVideoToApiVideo } from '@/services/apiVideo';



const handleVideoUpload = async (videoUri: string) => {

  try {

    setUploading(true);

    

    // 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ api.video

    const videoUrl = await uploadVideoToApiVideo(videoUri, {

      title: listing.title,

      tags: [listing.category, listing.make],

    });

    

    // 2. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Supabase

    const { data, error } = await supabase

      .from('cars')

      .insert({

        ...listing,

        video_url: videoUrl,

      });

    

    if (error) throw error;

    

    Alert.alert('–£—Å–ø–µ—à–Ω–æ', '–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ');

    router.back();

    

  } catch (error) {

    console.error('Upload error:', error);

    Alert.alert('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ');

  } finally {

    setUploading(false);

  }

};

```

### –í–∏–¥–µ–æ –∏–∑ —Ñ–æ—Ç–æ (7-8 —Ñ–æ—Ç–æ)

```typescript

// Backend —Ä–æ—É—Ç: /api/video-slideshow

const createVideoFromPhotos = async (photos: string[]) => {

  const response = await fetch('/api/video-slideshow', {

    method: 'POST',

    body: JSON.stringify({ photos }),

  });

  

  const { videoUrl } = await response.json();

  return videoUrl;

};

```

---

## üì¶ STORAGE –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

```typescript

// services/storage.ts

const LIMITS = {

  USER_DATA: 500_000,      // 500KB

  CACHE: 1_000_000,        // 1MB

  OFFLINE_VIDEOS: 20,      // —à—Ç—É–∫

};



// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

import { checkStorageLimit } from '@/services/storage';



const canSave = await checkStorageLimit('user', dataSize);

if (!canSave) {

  Alert.alert('–û—à–∏–±–∫–∞', '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞');

  return;

}

```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º AI

```typescript

// –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ API –∫–ª—é—á–µ–π

import { useTestMode } from '@/services/ai/testMode';



const result = await useTestMode('openai', {

  prompt: 'Test prompt',

});

```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash

npm test

```

---

## üöÄ –¢–ò–ü–ò–ß–ù–´–ï –ó–ê–î–ê–ß–ò

### –ó–∞–¥–∞—á–∞ 1: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ

```typescript

// 1. –û–±–Ω–æ–≤–∏ —Ç–∏–ø

interface Car {

  // ... existing fields

  new_field: string;  // –î–æ–±–∞–≤—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ

}



// 2. –û–±–Ω–æ–≤–∏ Supabase (SQL)

ALTER TABLE cars ADD COLUMN new_field TEXT;



// 3. –û–±–Ω–æ–≤–∏ —Ñ–æ—Ä–º—É

<TextInput

  value={newField}

  onChangeText={setNewField}

  placeholder="–ù–æ–≤–æ–µ –ø–æ–ª–µ"

/>



// 4. –°–æ—Ö—Ä–∞–Ω–∏

await supabase.from('cars').insert({

  ...data,

  new_field: newField,

});

```

### –ó–∞–¥–∞—á–∞ 2: –î–æ–±–∞–≤–∏—Ç—å AI –∞–Ω–∞–ª–∏–∑

```typescript

import { analyzeWithOpenAI } from '@/services/ai/openai';



const analyzeItem = async (item: Listing) => {

  try {

    const analysis = await analyzeWithOpenAI({

      prompt: `–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π: ${item.title}, —Ü–µ–Ω–∞ ${item.price}`,

      maxTokens: 150,

    });

    

    return analysis;

  } catch (error) {

    // Fallback –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

    return useTestMode('openai', item);

  }

};

```

### –ó–∞–¥–∞—á–∞ 3: –î–æ–±–∞–≤–∏—Ç—å Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```typescript

useEffect(() => {

  const subscription = supabase

    .from('cars')

    .on('*', (payload) => {

      // INSERT

      if (payload.eventType === 'INSERT') {

        setListings(prev => [payload.new, ...prev]);

      }

      // UPDATE

      if (payload.eventType === 'UPDATE') {

        setListings(prev => 

          prev.map(l => l.id === payload.new.id ? payload.new : l)

        );

      }

      // DELETE

      if (payload.eventType === 'DELETE') {

        setListings(prev => 

          prev.filter(l => l.id !== payload.old.id)

        );

      }

    })

    .subscribe();

  

  return () => subscription.unsubscribe();

}, []);

```

---

## ‚ö†Ô∏è –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò

### ‚ùå –û—à–∏–±–∫–∞ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –≤ Supabase Storage

```typescript

// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

await supabase.storage.from('videos').upload(path, video);



// –ü–†–ê–í–ò–õ–¨–ù–û

const videoUrl = await uploadVideoToApiVideo(video, metadata);

```

### ‚ùå –û—à–∏–±–∫–∞ 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

```typescript

// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

const data = await supabase.from('cars').select('*');



// –ü–†–ê–í–ò–õ–¨–ù–û

const { data, error } = await supabase.from('cars').select('*');

if (error) {

  console.error(error);

  return;

}

```

### ‚ùå –û—à–∏–±–∫–∞ 3: –ò–º–ø–æ—Ä—Ç –∏–∑ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–∞–ø–æ–∫

```typescript

// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

import ... from '../360-auto/...'



// –ü–†–ê–í–ò–õ–¨–ù–û

import { supabase } from '@/services/supabase';

```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ö–û–ú–ú–ò–¢–û–ú

- [ ] –ö–æ–¥ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ (app/, components/, services/)

- [ ] –ò–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ @ alias

- [ ] TypeScript —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –µ—Å—Ç—å (try-catch)

- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Supabase, api.video, AI)

- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (auth, RLS)

- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (memo, useMemo –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

---

## üéì –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û

### Environment Variables

```

SUPABASE_URL=...

SUPABASE_ANON_KEY=...

API_VIDEO_KEY=...

OPENAI_API_KEY=...

ANTHROPIC_API_KEY=...

GOOGLE_API_KEY=...

SMS_API_KEY=...

```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

npx expo start

npx expo start --clear



# –¢–µ—Å—Ç—ã

npm test



# –õ–∏–Ω—Ç–µ—Ä

npm run lint



# Build

eas build --platform ios

eas build --platform android

```

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** (app/, components/, services/)

2. **–í—Å–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ api.video** (–Ω–µ Supabase Storage)

3. **SMS —á–µ—Ä–µ–∑ nikita.kg** (+996 —Ñ–æ—Ä–º–∞—Ç)

4. **4 AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** (OpenAI, Claude, Google, YOLO)

5. **Supabase –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ** (–ë–î, Auth, Storage)

6. **TypeScript —Ç–∏–ø—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã**

7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ–∑–¥–µ**

8. **Real-time —á–µ—Ä–µ–∑ Supabase**

9. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS, Auth)**

10. **Performance (memo, useMemo)**

---

**–í–µ—Ä—Å–∏—è:** 3.0 Complete  
**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–≠—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º 360AutoMVP!
