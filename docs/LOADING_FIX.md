# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–ó–∞–≥—Ä—É–∑–∫–∞..."

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–ª–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ "–ó–∞–≥—Ä—É–∑–∫–∞..." –Ω–∞ localhost:8082 (web –≤–µ—Ä—Å–∏—è).

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ–∞–π–ª–µ `app/(tabs)/index.tsx` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `fetchListings`:

1. **–†–∞–Ω–Ω–∏–π return –ø–µ—Ä–µ–¥ finally** (—Å—Ç—Ä–æ–∫–∞ 139):

   ```typescript
   if (error) {
     setListings([]);
     return; // ‚ùå –í—ã—Ö–æ–¥ –î–û finally –±–ª–æ–∫–∞!
   }
   ```

   –≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ, —á—Ç–æ `setLoading(false)` –≤ `finally` –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ.

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ Promise.race** ‚Äî –µ—Å–ª–∏ Promise.race –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –æ–Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–±—Ä–∞–Ω —Ä–∞–Ω–Ω–∏–π return

```typescript
if (error) {
  console.warn(`[Feed] ${category} fetch error:`, error);
  setListings([]);
  // ‚úÖ –ù–ï –¥–µ–ª–∞–µ–º return - –ø—É—Å—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è finally –¥–ª—è setLoading(false)
} else if (data && data.length > 0) {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Promise.race

```typescript
try {
  const [carsData, horsesData, realEstateData] = await Promise.race([...]);
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
} catch (fetchError) {
  console.error('[Feed] Promise.race error:', fetchError);
  setListings([]); // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
}
```

### 3. –£–º–µ–Ω—å—à–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã (10s ‚Üí 5s –¥–ª—è web)

```typescript
const timeoutMs = 5000; // –ë—ã–ª–æ 10000
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab ‚Äî –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Console ‚Äî –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ "Failed to fetch" –∏–ª–∏ "Timeout"
4. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π, —ç–∫—Ä–∞–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫, –∞ –Ω–µ –≤–µ—á–Ω—É—é "–ó–∞–≥—Ä—É–∑–∫—É..."

## üìä –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

- ‚úÖ –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ: –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—Ä–æ—Å–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ (–Ω–µ "–ó–∞–≥—Ä—É–∑–∫–∞...")
- ‚úÖ –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (–Ω–µ –≤–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- ‚úÖ `setLoading(false)` –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `finally` –±–ª–æ–∫–µ

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –î–æ–±–∞–≤–ª–µ–Ω graceful fallback ‚Äî –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –≤–º–µ—Å—Ç–æ –≤–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
2. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ ‚Äî –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã ‚Äî –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–∫–ª–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
