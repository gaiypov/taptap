# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 360¬∞ Auto MVP

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±—â–∏–π –æ–±–∑–æ—Ä](#–æ–±—â–∏–π-–æ–±–∑–æ—Ä)
2. [–ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —Ä–æ—É—Ç—ã](#–Ω–∞–≤–∏–≥–∞—Ü–∏—è-–∏-—Ä–æ—É—Ç—ã)
3. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
4. [–ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞–±–æ—Ç—ã](#–∞–ª–≥–æ—Ä–∏—Ç–º—ã-—Ä–∞–±–æ—Ç—ã)
5. [–ü—É—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è](#–ø—É—Ç—å-–ø–æ–∫—É–ø–∞—Ç–µ–ª—è)
6. [–ü—É—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞](#–ø—É—Ç—å-–ø—Ä–æ–¥–∞–≤—Ü–∞)
7. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)

---

## üéØ –û–±—â–∏–π –æ–±–∑–æ—Ä

**360¬∞ Auto MVP** ‚Äî TikTok-style –≤–∏–¥–µ–æ–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–¥–∞–∂–∏:
- üöó –ê–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- üêé –õ–æ—à–∞–¥–µ–π
- üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –≤–∏–¥–µ–æ-–ª–µ–Ω—Ç–∞ (TikTok-style)
- AI-–∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∞–ª-—Ç–∞–π–º —á–∞—Ç—ã –º–µ–∂–¥—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏
- HLS —Å—Ç—Ä–∏–º–∏–Ω–≥ —á–µ—Ä–µ–∑ api.video
- SMS-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –†–æ—Å—Å–∏—è, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω, –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω)

---

## üó∫Ô∏è –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —Ä–æ—É—Ç—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ—É—Ç–æ–≤ (Expo Router)

```
app/
‚îú‚îÄ‚îÄ splash.tsx                          # Splash screen (2 —Å–µ–∫)
‚îú‚îÄ‚îÄ _layout.tsx                         # Root layout —Å Redux Provider
‚îÇ
‚îú‚îÄ‚îÄ (onboarding)/                      # –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (–≥—Ä—É–ø–ø–∞)
‚îÇ   ‚îú‚îÄ‚îÄ IntroCarousel.tsx             # 3 —Å–ª–∞–π–¥–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ welcome.tsx                    # –°—Ç–∞—Ä—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ permissions.tsx                # –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ (auth)/                            # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–≥—Ä—É–ø–ø–∞)
‚îÇ   ‚îú‚îÄ‚îÄ intro.tsx                      # –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ phone.tsx                      # –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ verify.tsx                     # –í–≤–æ–¥ 4-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ (tabs)/                            # –ì–ª–∞–≤–Ω—ã–µ —Ç–∞–±—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                      # üì± –ì–ª–∞–≤–Ω–∞—è (–≤–∏–¥–µ–æ-–ª–µ–Ω—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ search.tsx                     # üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ upload.tsx                     # ‚ûï –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ favorites.tsx                  # ‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
‚îÇ   ‚îú‚îÄ‚îÄ messages.tsx                   # üí¨ –°–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ profile.tsx                    # üë§ –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ
‚îú‚îÄ‚îÄ camera.tsx                         # –≠–∫—Ä–∞–Ω –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ camera/
‚îÇ   ‚îî‚îÄ‚îÄ process.tsx                    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ AI-–∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ
‚îÇ
‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îî‚îÄ‚îÄ [conversationId].tsx          # –ß–∞—Ç —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º
‚îÇ
‚îú‚îÄ‚îÄ profile/
‚îÇ   ‚îú‚îÄ‚îÄ [id].tsx                       # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ edit.tsx                        # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ my-listings.tsx                # –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
‚îÇ
‚îî‚îÄ‚îÄ legal/                             # –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ‚îú‚îÄ‚îÄ terms.tsx
    ‚îú‚îÄ‚îÄ privacy.tsx
    ‚îî‚îÄ‚îÄ consent.tsx
```

### –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏

#### üöÄ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```
Splash (2 —Å–µ–∫) 
  ‚Üí IntroCarousel (3 —Å–ª–∞–π–¥–∞)
    ‚Üí –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ /(tabs)/index
```

#### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
–ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞
  ‚Üí –ü–æ–ø—ã—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–ª–∞–π–∫, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —á–∞—Ç)
    ‚Üí (auth)/intro
      ‚Üí (auth)/phone (–≤—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã, –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞)
        ‚Üí (auth)/verify (4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥)
          ‚Üí –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
```

#### üìπ –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
```
(upload) ‚Üí –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
  ‚Üí camera.tsx (–∑–∞–ø–∏—Å—å/–≤—ã–±–æ—Ä –≤–∏–¥–µ–æ)
    ‚Üí camera/process.tsx (AI-–∞–Ω–∞–ª–∏–∑)
      ‚Üí –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
        ‚Üí –ü—É–±–ª–∏–∫–∞—Ü–∏—è
          ‚Üí –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞
```

#### üí¨ –ß–∞—Ç
```
–í–∏–¥–µ–æ –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Üí –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É
  ‚Üí chat/[conversationId].tsx
    ‚Üí Supabase Realtime –ø–æ–¥–ø–∏—Å–∫–∞
```

---

## üîå API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Backend API (Express.js –Ω–∞ –ø–æ—Ä—Ç—É 3001)

**Base URL:** `http://192.168.1.16:3001/api` (dev) –∏–ª–∏ production URL

#### üîê Authentication API

```
POST /api/auth/request-code
  Body: { phone: "+996..." }
  Response: { success: true, data: { phone, message } }

POST /api/auth/verify-code
  Body: { phone: "+996...", code: "1234" }
  Response: { success: true, data: { user, token, codeLength } }

POST /api/auth/validate
  Headers: { Authorization: "Bearer <token>" }
  Response: { success: true, user: {...} }
```

#### üìã Listings API

```
GET /api/listings/feed
  Query: { category?: "car"|"horse"|"real_estate", limit, offset }
  Response: { success: true, data: Listing[] }

GET /api/listings/:id
  Response: { success: true, data: Listing }

POST /api/listings
  Headers: { Authorization: "Bearer <token>" }
  Body: { category, video_id, title, price, details, ... }
  Response: { success: true, data: Listing }

PUT /api/listings/:id
DELETE /api/listings/:id
```

#### üí¨ Chat API

```
GET /api/chat/threads
  Headers: { Authorization: "Bearer <token>" }
  Response: { success: true, data: ChatThread[] }

POST /api/chat/start
  Body: { listing_id, buyer_id, seller_id }
  Response: { success: true, data: { thread_id } }

GET /api/chat/thread/:id/messages
  Response: { success: true, data: Message[] }

POST /api/chat/thread/:id/message
  Body: { body: "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è" }
  Response: { success: true, data: Message }
```

#### ü§ñ AI Analysis API

```
POST /api/analyze-car
  Body: { videoFrames: string[] (base64), metadata: {...} }
  Response: { 
    brand, model, year, mileage_km, 
    price_estimate, damages, condition, ...
  }
```

#### üìπ Video Slideshow API

```
POST /api/video/create-from-photos
  Body: { photos: string[], musicType: string }
  Response: { jobId: string }

GET /api/video/video-status/:jobId
  Response: { status: "processing"|"completed", videoUrl?, error? }
```

### –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### üé• api.video (HLS Streaming)
- **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ:** `POST https://ws.api.video/videos`
- **–ó–∞–≥—Ä—É–∑–∫–∞:** `POST https://ws.api.video/videos/{videoId}/source`
- **HLS URL:** `https://cdn.api.video/vod/{videoId}/hls/manifest.m3u8`
- **Thumbnail:** `https://cdn.api.video/vod/{videoId}/thumbnail.jpg`

**–°–µ—Ä–≤–∏—Å:** `services/apiVideo.ts`

#### üóÑÔ∏è Supabase
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (RLS policies)
- **Storage:** –í–∏–¥–µ–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (buckets: `videos`, `thumbnails`, `avatars`)
- **Realtime:** WebSocket –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ `chat_messages`
- **Auth:** JWT —Ç–æ–∫–µ–Ω—ã (—á–µ—Ä–µ–∑ backend)

**–°–µ—Ä–≤–∏—Å:** `services/supabase.ts`

#### üì± SMS (nikita.kg API)
- **URL:** `https://smspro.nikita.kg/api/message`
- **–ú–µ—Ç–æ–¥:** POST
- **Auth:** Basic Auth (login/password)
- **Sender:** `bat-bat.kg`

**–°–µ—Ä–≤–∏—Å:** `backend/services/smsService.ts`

#### ü§ñ AI Services
- **OpenAI GPT-4 Vision:** –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏
- **Google Vision OCR:** –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞ (–æ–¥–æ–º–µ—Ç—Ä)
- **Google Vision Detection:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- **Claude (Anthropic):** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ OpenAI

**–°–µ—Ä–≤–∏—Å—ã:** 
- `services/ai.ts` (–º–æ–±–∏–ª—å–Ω—ã–π)
- `backend/services/aiService.ts` (backend)

---

## ‚öôÔ∏è –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞–±–æ—Ç—ã

### 1Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤–∏–¥–µ–æ

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å" ‚Üí (upload)
2. –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–≤—Ç–æ/–ª–æ—à–∞–¥—å/–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å)
3. –ó–∞–ø–∏—Å—å –∏–ª–∏ –≤—ã–±–æ—Ä –≤–∏–¥–µ–æ ‚Üí camera.tsx
4. –ü–µ—Ä–µ—Ö–æ–¥ –≤ camera/process.tsx:
   
   a) –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ (expo-video-thumbnails)
      ‚Üí 5 –∫–∞–¥—Ä–æ–≤: [0s, 5s, 10s, 20s, 30s]
   
   b) AI-–∞–Ω–∞–ª–∏–∑ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ):
      - OpenAI: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏/–≥–æ–¥–∞
      - Google OCR: —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞
      - Google Vision: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
      ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: Partial<Car> –æ–±—ä–µ–∫—Ç
   
   c) –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –Ω–∞ api.video:
      - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ videoId + uploadToken
      - Chunked upload —Ñ–∞–π–ª–∞
      - –ü–æ–ª—É—á–µ–Ω–∏–µ HLS URL –∏ thumbnail
   
   d) –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å AI-–¥–∞–Ω–Ω—ã–º–∏
      ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç
   
   e) –ü—É–±–ª–∏–∫–∞—Ü–∏—è:
      - POST /api/listings
      - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Supabase (listings + car_details/horse_details/real_estate_details)
      - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"
```

### 2Ô∏è‚É£ –í–∏–¥–µ–æ-–ª–µ–Ω—Ç–∞ (Feed)

```
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ (app/(tabs)/index.tsx):
   - Redux: activeCategory ('car' | 'horse' | 'real_estate')
   - GET /api/listings/feed?category={category}
   - –ú–∞–ø–ø–∏–Ω–≥ –≤ FeedListing[]

2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:
   - FlatList —Å windowSize={3}
   - OptimizedVideoPlayer –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
   - –ü—Ä–µ–ª–æ–∞–¥–µ—Ä: –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–µ–æ –≤ —Ñ–æ–Ω–µ

3. –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:
   - –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤–∏–¥–µ–æ (isActive=true)
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞ –ø–∞—É–∑–µ
   - –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ: pause —Å—Ç–∞—Ä–æ–≥–æ, play –Ω–æ–≤–æ–≥–æ

4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º:
   - Redux: mutedVideoIds[]
   - toggleMuteVideo(id) ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç/—É–±–∏—Ä–∞–µ—Ç –∏–∑ –º–∞—Å—Å–∏–≤–∞
   - OptimizedVideoPlayer —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ isMuted

5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - Redux: videoCache { id: { url, cachedAt } }
   - SQLite: offline cache –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
```

### 3Ô∏è‚É£ AI-–∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ

```typescript
–ê–ª–≥–æ—Ä–∏—Ç–º analyzeCarVideo(videoUri):

1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤:
   - extractFramesFromVideo(videoUri)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: string[] (base64 –∫–∞–¥—Ä—ã)

2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (Promise.all):

   a) OpenAI GPT-4 Vision:
      - –í—Ö–æ–¥: –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä (data URL)
      - –ü—Ä–æ–º–ø—Ç: "–û–ø—Ä–µ–¥–µ–ª–∏ –º–∞—Ä–∫—É, –º–æ–¥–µ–ª—å, –≥–æ–¥, —Ü–≤–µ—Ç"
      - –û—Ç–≤–µ—Ç: { brand, model, year, color }

   b) Google Vision OCR:
      - –í—Ö–æ–¥: –∫–∞–¥—Ä —Å –æ–¥–æ–º–µ—Ç—Ä–æ–º (–∫–∞–¥—Ä #3 –∏–ª–∏ #0)
      - API: documents.detect_text
      - –ü–æ–∏—Å–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–∞: /^\d+.*–∫–º/i
      - –†–µ–∑—É–ª—å—Ç–∞—Ç: mileage_km (—á–∏—Å–ª–æ)

   c) Google Vision Object Detection:
      - –í—Ö–æ–¥: –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä
      - API: images.annotate (objectLocalization)
      - –ü–æ–∏—Å–∫: –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è, —Ü–∞—Ä–∞–ø–∏–Ω—ã, –≤–º—è—Ç–∏–Ω—ã
      - –†–µ–∑—É–ª—å—Ç–∞—Ç: damages[] array

3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   {
     brand: string,
     model: string,
     year: number,
     mileage_km: number,
     damages: Damage[],
     condition: "excellent" | "good" | "fair" | "poor",
     conditionScore: number (0-100)
   }

4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   - –ö–ª—é—á: videoUri hash
   - –ó–Ω–∞—á–µ–Ω–∏–µ: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞
   - TTL: 24 —á–∞—Å–∞
```

### 4Ô∏è‚É£ –ß–∞—Ç (Realtime)

```
1. –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞:
   - –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É"
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - POST /api/chat/start
     { listing_id, buyer_id, seller_id }
   - –ü–æ–ª—É—á–µ–Ω–∏–µ thread_id

2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:
   - GET /api/chat/thread/:thread_id/messages
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ FlatList

3. Realtime –ø–æ–¥–ø–∏—Å–∫–∞:
   - Supabase channel: `chat:${thread_id}`
   - –°–ª—É—à–∞–µ–º: INSERT –Ω–∞ `chat_messages` where `thread_id=eq.${thread_id}`
   - –ü—Ä–∏ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ state + –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª

4. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - POST /api/chat/thread/:thread_id/message
   - Body: { body: "—Ç–µ–∫—Å—Ç" }
   - –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
   - Realtime —É–≤–µ–¥–æ–º–∏—Ç –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
```

### 5Ô∏è‚É£ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã

```
1. –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (FTS):
   - Supabase: pg_trgm extension
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞: title, description, brand, model
   - –ó–∞–ø—Ä–æ—Å: .textSearch('fts_vector', query)

2. –§–∏–ª—å—Ç—Ä—ã:
   - –¶–µ–Ω–∞: .gte('price', minPrice).lte('price', maxPrice)
   - –ì–æ–¥: .gte('year', minYear).lte('year', maxYear)
   - –†–µ–≥–∏–æ–Ω: .eq('city', city)
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ: .eq('condition', condition)

3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:
   ```
   supabase
     .from('listings')
     .select('*, seller:users(*), car_details(*)')
     .textSearch('fts_vector', query)
     .gte('price', minPrice)
     .eq('category', 'car')
     .order('created_at', { ascending: false })
   ```
```

---

## üõí –ü—É—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è

### –§–ª–æ—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ)

```
1. Splash Screen (2 —Å–µ–∫)
   ‚Üì
2. IntroCarousel (3 —Å–ª–∞–π–¥–∞)
   ‚Üì
3. –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ (app/(tabs)/index.tsx)
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: üöó –ê–≤—Ç–æ / üêé –õ–æ—à–∞–¥–∏ / üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
   - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–∏–¥–µ–æ
   - –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–¥–µ–æ
   
4. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ:
   - –î–≤–æ–π–Ω–æ–π —Ç–∞–ø ‚Üí –ª–∞–π–∫ (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞ ‚Üí Redux state
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
   
5. –ü–æ–ø—ã—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è:
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ (auth)/intro
   - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ (auth)/intro
   - –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ (auth)/intro
```

### –§–ª–æ—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ)

```
1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
   (auth)/intro
     ‚Üí (auth)/phone (–≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ + –≤—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã)
       ‚Üí SMS –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
         ‚Üí (auth)/verify (–≤–≤–æ–¥ 4-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞)
           ‚Üí JWT —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω
             ‚Üí –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é

2. –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ (–ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª):
   - ‚ù§Ô∏è –õ–∞–π–∫ ‚Üí POST /api/listings/:id/like (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î)
   - üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚Üí BottomSheet —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
   - ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ‚Üí POST /api/favorites/:id
   - üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí Share API
   - ‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É ‚Üí chat/[conversationId]
   - üîá –ë–µ–∑ –∑–≤—É–∫–∞ ‚Üí Redux toggle

3. –ü–æ–∏—Å–∫ (app/(tabs)/search.tsx):
   - –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–∫—Å—Ç—É
   - –§–∏–ª—å—Ç—Ä—ã: —Ü–µ–Ω–∞, –≥–æ–¥, —Ä–µ–≥–∏–æ–Ω, —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ª–µ–Ω—Ç—ã

4. –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (app/(tabs)/favorites.tsx):
   - GET /api/favorites
   - –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

5. –ß–∞—Ç (chat/[conversationId].tsx):
   - –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ ‚Üí (tabs)/messages.tsx
   - –û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞ ‚Üí Supabase Realtime
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
```

---

## üè™ –ü—É—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞

### –§–ª–æ—É –ø—Ä–æ–¥–∞–≤—Ü–∞

```
1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é)

2. –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:
   (tabs)/upload.tsx
     ‚Üì
   –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–≤—Ç–æ/–ª–æ—à–∞–¥—å/–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å)
     ‚Üì
   camera.tsx
     - –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ (expo-camera)
     - –ò–ª–∏ –≤—ã–±–æ—Ä –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ (expo-image-picker)
     ‚Üì
   camera/process.tsx
     
     a) –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤ (5 –∫–∞–¥—Ä–æ–≤)
     b) AI-–∞–Ω–∞–ª–∏–∑:
        - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
        - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞ (–¥–ª—è –∞–≤—Ç–æ)
        - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
     c) –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ api.video:
        - –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ ‚Üí videoId
        - Upload —Ñ–∞–π–ª–∞ ‚Üí HLS URL
     d) –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:
        - AI-–¥–∞–Ω–Ω—ã–µ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ)
        - –¶–µ–Ω–∞, –æ–ø–∏—Å–∞–Ω–∏–µ
        - –õ–æ–∫–∞—Ü–∏—è
     ‚Üì
   –ü—É–±–ª–∏–∫–∞—Ü–∏—è:
     POST /api/listings
     {
       category: "car",
       video_id: "vi...",
       title: "Mercedes-Benz C200",
       price: 1500000,
       car_details: {
         brand: "Mercedes-Benz",
         model: "C200",
         year: 2020,
         mileage_km: 45000,
         damages: [...]
       },
       seller_user_id: currentUser.id
     }
     ‚Üì
   –£—Å–ø–µ—Ö ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
     ‚Üì
   –ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞ (–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤–∏–¥–Ω–æ –≤—Å–µ–º)

3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏:
   (tabs)/profile.tsx
     ‚Üí "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"
       ‚Üí profile/my-listings.tsx
         - GET /api/listings?seller_id=...
         - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (PUT)
         - –£–¥–∞–ª–µ–Ω–∏–µ (DELETE)
         - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –ª–∞–π–∫–∏

4. –û–±—â–µ–Ω–∏–µ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏:
   (tabs)/messages.tsx
     - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
     - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
     - –û—Ç–≤–µ—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
```

### AI-–∞–Ω–∞–ª–∏–∑ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞

**–î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π:**
```typescript
{
  brand: "Mercedes-Benz",      // OpenAI GPT-4
  model: "C200",               // OpenAI GPT-4
  year: 2020,                  // OpenAI GPT-4
  mileage_km: 45000,           // Google OCR
  damages: [                    // Google Vision
    { type: "scratch", location: "front_bumper", severity: "minor" },
    { type: "dent", location: "rear_door", severity: "moderate" }
  ],
  condition: "good",            // –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ damages
  conditionScore: 75           // 0-100
}
```

**–î–ª—è –ª–æ—à–∞–¥–µ–π:**
```typescript
{
  breed: "Arabian",            // AI —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ—Ä–æ–¥—ã
  age_years: 5,                // –û—Ü–µ–Ω–∫–∞ –ø–æ –≤–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É
  height_cm: 150,              // AI –∏–∑–º–µ—Ä–µ–Ω–∏–µ
  color: "bay",                // AI —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
  healthStatus: "healthy"      // AI –æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
}
```

**–î–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:**
```typescript
{
  property_type: "apartment",  // AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
  area_m2: 65,                 // AI –∏–∑–º–µ—Ä–µ–Ω–∏–µ
  rooms: 2,                    // AI –ø–æ–¥—Å—á–µ—Ç
  floor: 5,                    // OCR (–µ—Å–ª–∏ –≤–∏–¥–Ω–æ)
  condition: "good"            // AI –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
}
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend (Mobile)
- **Framework:** React Native 0.81 + Expo SDK 54
- **Routing:** Expo Router (file-based)
- **State Management:** Redux Toolkit
- **UI:** React Native –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + Ionicons
- **Video Player:** expo-video (useVideoPlayer hook)
- **Camera:** expo-camera, expo-image-picker
- **Storage:** AsyncStorage + SQLite (–æ—Ñ—Ñ–ª–∞–π–Ω –∫—ç—à)
- **HTTP Client:** Fetch API + axios
- **Animations:** react-native-reanimated, Animated API
- **Haptics:** expo-haptics

### Backend
- **Framework:** Express.js (Node.js)
- **Database:** Supabase (PostgreSQL)
- **Storage:** Supabase Storage (S3-compatible)
- **Realtime:** Supabase Realtime (WebSocket)
- **Auth:** JWT tokens
- **SMS:** nikita.kg API
- **Video:** api.video (HLS streaming)
- **AI:** OpenAI GPT-4 Vision, Google Vision API, Claude

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Database:** Supabase PostgreSQL
- **File Storage:** Supabase Storage buckets
- **CDN:** api.video CDN (–¥–ª—è –≤–∏–¥–µ–æ)
- **Backend Hosting:** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users (
  id UUID PRIMARY KEY,
  phone VARCHAR UNIQUE,
  name VARCHAR,
  avatar_url TEXT,
  created_at TIMESTAMP
)

-- –û–±—ä—è–≤–ª–µ–Ω–∏—è
listings (
  id UUID PRIMARY KEY,
  seller_user_id UUID REFERENCES users(id),
  category VARCHAR, -- 'car', 'horse', 'real_estate'
  video_id VARCHAR, -- api.video ID
  video_url TEXT,
  thumbnail_url TEXT,
  title VARCHAR,
  price DECIMAL,
  city VARCHAR,
  status VARCHAR, -- 'draft', 'published', 'sold'
  created_at TIMESTAMP
)

-- –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
car_details (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  brand VARCHAR,
  model VARCHAR,
  year INTEGER,
  mileage_km INTEGER,
  damages JSONB,
  condition VARCHAR,
  condition_score INTEGER
)

-- –î–µ—Ç–∞–ª–∏ –ª–æ—à–∞–¥–∏
horse_details (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  breed VARCHAR,
  age_years INTEGER,
  height_cm INTEGER,
  color VARCHAR
)

-- –î–µ—Ç–∞–ª–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
real_estate_details (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  property_type VARCHAR,
  area_m2 DECIMAL,
  rooms INTEGER,
  floor INTEGER
)

-- –ß–∞—Ç-—Ç—Ä–µ–¥—ã
chat_threads (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  buyer_id UUID REFERENCES users(id),
  seller_id UUID REFERENCES users(id),
  last_message_at TIMESTAMP,
  created_at TIMESTAMP
)

-- –°–æ–æ–±—â–µ–Ω–∏—è
chat_messages (
  id UUID PRIMARY KEY,
  thread_id UUID REFERENCES chat_threads(id),
  sender_id UUID REFERENCES users(id),
  body TEXT,
  created_at TIMESTAMP
)

-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
favorites (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  listing_id UUID REFERENCES listings(id),
  created_at TIMESTAMP,
  UNIQUE(user_id, listing_id)
)

-- –õ–∞–π–∫–∏
likes (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  listing_id UUID REFERENCES listings(id),
  created_at TIMESTAMP,
  UNIQUE(user_id, listing_id)
)

-- –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
verification_codes (
  id UUID PRIMARY KEY,
  phone VARCHAR,
  code VARCHAR,
  expires_at TIMESTAMP,
  is_used BOOLEAN
)
```

### RLS (Row Level Security) Policies

- **listings:** –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å
- **chat_threads:** –£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
- **chat_messages:** –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç—Ä–µ–¥–∞ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å
- **favorites:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
- **users:** –ü—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É

---

## üîÑ Redux Store Structure

```typescript
{
  feed: {
    currentIndex: number,           // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –≤–∏–¥–µ–æ
    activeCategory: 'car' | 'horse' | 'real_estate',
    preloadedIndexes: number[]      // –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–µ–ª–æ–∞–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
  },
  
  video: {
    activeVideoId: string | null,
    playingVideoIds: string[],      // –í–∏–¥–µ–æ –≤ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏
    mutedVideoIds: string[],        // –í–∏–¥–µ–æ –±–µ–∑ –∑–≤—É–∫–∞
    videoCache: {                   // –ö—ç—à URL –≤–∏–¥–µ–æ
      [id: string]: { url: string, cachedAt: number }
    }
  },
  
  user: {
    currentUser: User | null,
    token: string | null
  },
  
  favorites: {
    items: string[]                 // ID –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  }
}
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥ –≤–∏–¥–µ–æ
- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ –≤ —Ñ–æ–Ω–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç —Ç–µ–∫—É—â–µ–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `isPreloaded` —Ñ–ª–∞–≥ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 2. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞
- `FlatList` —Å `windowSize={3}` (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ 3 —ç–∫—Ä–∞–Ω–∞)
- `removeClippedSubviews={true}` –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redux –∫—ç—à –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- SQLite –∫—ç—à –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
- AsyncStorage –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ö–æ–º–ø—Ä–µ—Å—Å–∏—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é
- Placeholder'—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (mobile/backend)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –û—Ñ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –†–µ–∞–ª-—Ç–∞–π–º –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- ‚úÖ AI-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 28 —è–Ω–≤–∞—Ä—è 2025
