# üìã –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞ 360¬∞ Auto Marketplace

> **–î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è AI –º–æ–¥–µ–ª–µ–π (Grok, GPT-5, Claude Code)**  
> –ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: –ª–æ–≥–∏–∫–∞, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

---

## üéØ –ß–¢–û –ú–´ –°–¢–†–û–ò–ú

**360¬∞ Auto Marketplace** ‚Äî —ç—Ç–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤–∏–¥–µ–æ–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ TikTok –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, –ª–æ—à–∞–¥–µ–π –∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–µ.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üì± **TikTok-style –≤–∏–¥–µ–æ –ª–µ–Ω—Ç–∞** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–∏–¥–µ–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ü§ñ **AI-–∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞
- üí¨ **–†–µ–∞–ª-—Ç–∞–π–º —á–∞—Ç—ã** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏
- üè¢ **–ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –¥–ª—è –¥–∏–ª–µ—Ä–æ–≤ –∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤
- üìç **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî SMS-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞, –†–æ—Å—Å–∏–∏, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞, –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–∞
- üöÄ **Boost —Å–∏—Å—Ç–µ–º–∞** ‚Äî –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –æ–ø–ª–∞—Ç–æ–π
- üìä **–û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –°–¢–†–£–ö–¢–£–†–ê

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è)

```
360AutoMVP/
‚îú‚îÄ‚îÄ app/                    # Expo Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã (file-based routing)
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # –ì–ª–∞–≤–Ω—ã–µ —Ç–∞–±—ã: index, search, upload, favorites, messages, profile
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: intro, phone, verify
‚îÇ   ‚îú‚îÄ‚îÄ (onboarding)/      # –û–Ω–±–æ—Ä–¥–∏–Ω–≥: IntroCarousel
‚îÇ   ‚îú‚îÄ‚îÄ (business)/        # –ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã: setup, upgrade
‚îÇ   ‚îú‚îÄ‚îÄ camera/            # –ó–∞–ø–∏—Å—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ chat/              # –ß–∞—Ç—ã —Å –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ listing/           # –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ components/            # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –¥–æ–º–µ–Ω–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ VideoFeed/         # –í–∏–¥–µ–æ –ª–µ–Ω—Ç–∞ –∏ –ø–ª–µ–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ Auth/              # SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Upload/            # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ Comments/          # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ Business/          # –ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ common/            # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ services/              # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts        # Supabase –∫–ª–∏–µ–Ω—Ç (–ë–î, Auth, Storage)
‚îÇ   ‚îú‚îÄ‚îÄ apiVideo.ts        # API.video (HLS —Å—Ç—Ä–∏–º–∏–Ω–≥)
‚îÇ   ‚îú‚îÄ‚îÄ sms.ts             # SMS nikita.kg
‚îÇ   ‚îú‚îÄ‚îÄ ai.ts              # AI –∞–Ω–∞–ª–∏–∑ (OpenAI, Claude, Google)
‚îÇ   ‚îú‚îÄ‚îÄ api.ts             # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è backend
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ backend/               # Express.js API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ listings.ts    # –û–±—ä—è–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts        # –ß–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analyze.ts     # AI –∞–Ω–∞–ª–∏–∑
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ business.ts   # –ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/          # Backend —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ aiService.ts   # AI –∞–Ω–∞–ª–∏–∑ (backend)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ smsService.ts  # SMS –æ—Ç–ø—Ä–∞–≤–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabaseClient.ts
‚îÇ   ‚îî‚îÄ‚îÄ server.ts          # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ lib/                   # State management –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ store/             # Redux Toolkit
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slices/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authSlice.ts      # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feedSlice.ts      # –õ–µ–Ω—Ç–∞ (currentIndex, activeCategory, preloadedIndexes)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ videoSlice.ts     # –í–∏–¥–µ–æ (activeVideoId, mutedVideoIds, videoCache)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ offlineSlice.ts   # –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/apiSlice.ts       # RTK Query
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ shared/src/            # –û–±—â–∏–µ —Ç–∏–ø—ã (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)
‚îÇ   ‚îî‚îÄ‚îÄ types/             # TypeScript —Ç–∏–ø—ã
‚îÇ
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/        # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ)
‚îÇ   ‚îî‚îÄ‚îÄ functions/        # Edge Functions
‚îÇ
‚îî‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### Path Aliases (TypeScript)

```typescript
@components/*  ‚Üí components/*
@services/*    ‚Üí services/*
@hooks/*       ‚Üí hooks/*
@utils/*       ‚Üí utils/*
@types/*       ‚Üí types/* (–≤—Ä–µ–º–µ–Ω–Ω–æ, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ @shared/*)
@shared/*      ‚Üí shared/src/*
@lib/*         ‚Üí lib/*
```

---

## ‚öôÔ∏è –õ–û–ì–ò–ö–ê –ò –ê–õ–ì–û–†–ò–¢–ú–´

### 1. –ê–ª–≥–æ—Ä–∏—Ç–º –≤–∏–¥–µ–æ-–ª–µ–Ω—Ç—ã (Feed Algorithm)

#### –ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥ –≤–∏–¥–µ–æ
```typescript
// –ü—Ä–µ–ª–æ–∞–¥–∏–º —Ç–µ–∫—É—â–µ–µ + —Å–ª–µ–¥—É—é—â–∏–µ 2 –≤–∏–¥–µ–æ
const preloadIndexes = new Set<number>();
preloadIndexes.add(currentIndex);        // –¢–µ–∫—É—â–µ–µ
preloadIndexes.add(currentIndex + 1);    // –°–ª–µ–¥—É—é—â–µ–µ
preloadIndexes.add(currentIndex + 2);    // –ß–µ—Ä–µ–∑ –æ–¥–Ω–æ
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –ü—Ä–µ–ª–æ–∞–¥–∏–º **—Ç–µ–∫—É—â–µ–µ** –≤–∏–¥–µ–æ (–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ)
- ‚úÖ –ü—Ä–µ–ª–æ–∞–¥–∏–º **—Å–ª–µ–¥—É—é—â–∏–µ 2** –≤–∏–¥–µ–æ (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–∫—Ä–æ–ª–ª—É)
- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–µ–ª–æ–∞–¥–∏–º **–ø–µ—Ä–≤—ã–π** —ç–ª–µ–º–µ–Ω—Ç (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)
- ‚úÖ –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–≥–æ –≤–∏–¥–µ–æ
```typescript
const viewabilityConfig = {
  itemVisiblePercentThreshold: 50,  // –í–∏–¥–∏–º–æ –∫–æ–≥–¥–∞ 50% –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  minimumViewTime: 100,              // –ú–∏–Ω–∏–º—É–º 100ms –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
};
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∏–¥–∏–º–æ–µ –≤–∏–¥–µ–æ –∫–æ–≥–¥–∞ **50%** –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- ‚úÖ –ú–∏–Ω–∏–º—É–º **100ms** –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–ª–æ–∞–¥–∏–º **—Å–ª–µ–¥—É—é—â–µ–µ** –∏ **–ø—Ä–µ–¥—ã–¥—É—â–µ–µ**
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`setCurrentIndex`)

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
```typescript
const CACHE_DURATION = 30000; // 30 —Å–µ–∫—É–Ω–¥
const listingsCache = {
  [category]: {
    data: FeedListing[],
    timestamp: number
  }
};
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –ö—ç—à –Ω–∞ **30 —Å–µ–∫—É–Ω–¥** –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à –µ—Å–ª–∏ —Å–≤–µ–∂–∏–π
- ‚úÖ –ü—Ä–∏ pull-to-refresh –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫—ç—à
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–ª–æ–∞–¥ –ø–µ—Ä–≤—ã—Ö 3 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

#### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (feedAlgorithm.ts)

1. **–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:**
   - –° AI-–∞–Ω–∞–ª–∏–∑–æ–º ‚Üí –≤—ã—à–µ
   - –° —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ ‚Üí –≤—ã—à–µ
   - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã ‚Üí –≤—ã—à–µ

2. **–ü–æ –ª–æ–∫–∞—Ü–∏–∏:**
   - –í –≥–æ—Ä–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –≤—ã—à–µ
   - –í —Ä–µ–≥–∏–æ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –≤—ã—à–µ
   - –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞ ‚Üí –Ω–∏–∂–µ

3. **–ü–æ –¥–∞—Ç–µ:**
   - –ù–æ–≤—ã–µ ‚Üí –≤—ã—à–µ
   - –°—Ç–∞—Ä—ã–µ ‚Üí –Ω–∏–∂–µ

4. **–ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
   - –ë–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤ ‚Üí –≤—ã—à–µ
   - –ë–æ–ª—å—à–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí –≤—ã—à–µ

#### Neural Warm-up Engine (lib/videoWarmup.ts)

**–ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ–≤ –≤–∏–¥–µ–æ:**
- –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å–∫—Ä–æ–ª–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑)
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–≥—Ä–µ–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
- QoS —Ä–µ–∂–∏–º—ã: `low`, `mid`, `high` (–Ω–∞ –æ—Å–Ω–æ–≤–µ FPS –∏ stall)
- Fire-and-forget –ø—Ä–æ–≥—Ä–µ–≤ —Å —Ç–∞–π–º–∞—É—Ç–æ–º

---

### 2. AI-–∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ (Multi-Provider)

#### –ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

```typescript
async function analyzeCarVideo(videoUri: string): Promise<Partial<Car>> {
  // –®–∞–≥ 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤ (10%)
  const frames = await extractFramesFromVideo(videoUri, 5);
  // –ö–∞–¥—Ä—ã: [0s, 5s, 10s, 20s, 30s]
  
  // –®–∞–≥ 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (50-70%)
  const [carId, mileage, damages] = await Promise.all([
    analyzeWithOpenAI(frames[0]),           // –ú–∞—Ä–∫–∞, –º–æ–¥–µ–ª—å, –≥–æ–¥, —Ü–≤–µ—Ç
    extractMileageWithGoogle(frames[3]),    // OCR –æ–¥–æ–º–µ—Ç—Ä–∞
    detectDamagesWithGoogle(frames[0])      // –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
  ]);
  
  // –®–∞–≥ 3: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (70-95%)
  const claudeAnalysis = await analyzeWithClaude(frames, {
    brand: carId.brand,
    model: carId.model,
    year: carId.year,
    mileage
  });
  // –†–µ–∑—É–ª—å—Ç–∞—Ç: condition, conditionScore, estimatedPrice, features
  
  // –®–∞–≥ 4: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (95-100%)
  return {
    brand, model, year, mileage,
    damages,
    aiAnalysis: {
      condition: claudeAnalysis.condition,
      conditionScore: claudeAnalysis.conditionScore,
      estimatedPrice: claudeAnalysis.estimatedPrice,
      features: claudeAnalysis.features
    }
  };
}
```

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã AI:**
- **OpenAI GPT-4 Vision** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏/–≥–æ–¥–∞/—Ü–≤–µ—Ç–∞
- **Google Vision OCR** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞ (–æ–¥–æ–º–µ—Ç—Ä)
- **Google Vision Object Detection** ‚Äî –¥–µ—Ç–µ–∫—Ü–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- **Claude (Anthropic)** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Ü–µ–Ω–∫–∞ —Ü–µ–Ω—ã
- **YOLO (Roboflow)** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ö–ª—é—á: hash(videoUri)
- TTL: 24 —á–∞—Å–∞
- –õ–∏–º–∏—Ç—ã: daily request limits –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∞ –ª–æ—à–∞–¥–µ–π

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º, –Ω–æ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–¥—ã (–ê—Ö–∞–ª—Ç–µ–∫–∏–Ω—Å–∫–∞—è, –ê—Ä–∞–±—Å–∫–∞—è, –∏ —Ç.–¥.)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Å—Ç–∏ (–≥–Ω–µ–¥–∞—è, –≤–æ—Ä–æ–Ω–∞—è, —Å–µ—Ä–∞—è, –∏ —Ç.–¥.)
- –û—Ü–µ–Ω–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏ —Ä–æ—Å—Ç–∞
- –û—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ –∫–æ–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- Body Condition Score (BCS 1-9)

#### –ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∞ (–∫–≤–∞—Ä—Ç–∏—Ä–∞, –¥–æ–º, —É—á–∞—Å—Ç–æ–∫)
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∏ (AI)
- –ü–æ–¥—Å—á–µ—Ç –∫–æ–º–Ω–∞—Ç
- –û—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

### 3. –ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

```typescript
// 1. –ó–∞–ø–∏—Å—å/–≤—ã–±–æ—Ä –≤–∏–¥–µ–æ
camera.tsx ‚Üí expo-camera –∏–ª–∏ expo-image-picker

// 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤
extractFramesFromVideo(videoUri, 5)
‚Üí [frame0, frame5, frame10, frame20, frame30]

// 3. AI-–∞–Ω–∞–ª–∏–∑ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π)
const aiResult = await analyzeCarVideo(videoUri);

// 4. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ api.video
const { videoId, uploadToken } = await apiVideo.createVideo();
await apiVideo.uploadVideo(videoId, uploadToken, videoFile);
const { hls, thumbnail } = await apiVideo.getVideoAssets(videoId);

// 5. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å AI-–¥–∞–Ω–Ω—ã–º–∏
‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç

// 6. –ü—É–±–ª–∏–∫–∞—Ü–∏—è
POST /api/listings {
  category: "car",
  video_id: videoId,
  video_url: hls,
  thumbnail_url: thumbnail,
  title, price, details,
  car_details: aiResult
}
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ –í—Å–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ **api.video** (HLS —Å—Ç—Ä–∏–º–∏–Ω–≥)
- ‚úÖ **–ù–ï** –∏—Å–ø–æ–ª—å–∑—É–µ–º Supabase Storage –¥–ª—è –≤–∏–¥–µ–æ
- ‚úÖ Chunked upload –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

### 4. –ê–ª–≥–æ—Ä–∏—Ç–º —á–∞—Ç–∞ (Realtime)

```typescript
// 1. –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
POST /api/chat/start {
  listing_id, buyer_id, seller_id
} ‚Üí { thread_id }

// 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
GET /api/chat/thread/:thread_id/messages
‚Üí Message[]

// 3. Realtime –ø–æ–¥–ø–∏—Å–∫–∞ (Supabase)
const channel = supabase
  .channel(`chat:${thread_id}`)
  .on('postgres_changes', {
    event: 'INSERT',
    schema: 'public',
    table: 'chat_messages',
    filter: `thread_id=eq.${thread_id}`
  }, (payload) => {
    // –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ state
    setMessages(prev => [...prev, payload.new]);
  })
  .subscribe();

// 4. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
POST /api/chat/thread/:thread_id/message {
  body: "—Ç–µ–∫—Å—Ç"
} ‚Üí Message

// 5. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Üí Expo Notifications –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
```

**–õ–æ–≥–∏–∫–∞:**
- ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
- ‚úÖ Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Supabase
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

---

### 5. –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

```typescript
// –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (FTS)
supabase
  .from('listings')
  .select('*, seller:users(*), car_details(*)')
  .textSearch('fts_vector', query)  // pg_trgm extension
  .gte('price', minPrice)
  .lte('price', maxPrice)
  .gte('year', minYear)
  .lte('year', maxYear)
  .eq('city', city)
  .eq('condition', condition)
  .order('created_at', { ascending: false });
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `fts_vector` ‚Äî –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (title, description, brand, model)
- `price`, `year`, `city`, `condition` ‚Äî –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

### 6. –ê–ª–≥–æ—Ä–∏—Ç–º –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–æ–≤

#### –¢–∞—Ä–∏—Ñ—ã (Tiers)

```typescript
type BusinessTier = 'free' | 'lite' | 'business' | 'pro';

const TIER_LIMITS = {
  free: {
    max_listings: 2,
    max_team_members: 1,
    features: ['basic_listing']
  },
  lite: {
    max_listings: 10,
    max_team_members: 3,
    features: ['basic_listing', 'analytics']
  },
  business: {
    max_listings: 50,
    max_team_members: 10,
    features: ['basic_listing', 'analytics', 'boost', 'team_management']
  },
  pro: {
    max_listings: -1,  // unlimited
    max_team_members: -1,
    features: ['all', 'verification', 'priority_support']
  }
};
```

#### –õ–æ–≥–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫

- ‚úÖ –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (trial) –¥–ª—è –Ω–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ (auto_renew)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è PRO (–¥–æ–∫—É–º–µ–Ω—Ç—ã)

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–• (Supabase PostgreSQL)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users (
  id UUID PRIMARY KEY,
  phone VARCHAR UNIQUE,
  name VARCHAR,
  avatar_url TEXT,
  city VARCHAR,
  created_at TIMESTAMPTZ
)

-- –û–±—ä—è–≤–ª–µ–Ω–∏—è
listings (
  id UUID PRIMARY KEY,
  seller_user_id UUID REFERENCES users(id),
  category VARCHAR,  -- 'car', 'horse', 'real_estate'
  video_id VARCHAR,  -- api.video ID
  video_url TEXT,    -- HLS URL
  thumbnail_url TEXT,
  title VARCHAR,
  price DECIMAL,
  city VARCHAR,
  status VARCHAR,    -- 'draft', 'published', 'sold'
  created_at TIMESTAMPTZ
)

-- –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
car_details (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  brand VARCHAR,
  model VARCHAR,
  year INTEGER,
  mileage_km INTEGER,
  damages JSONB,
  condition VARCHAR,
  condition_score INTEGER
)

-- –õ–∞–π–∫–∏ (–í–ê–ñ–ù–û: listing_likes, –ù–ï likes!)
listing_likes (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  listing_id UUID REFERENCES listings(id),
  created_at TIMESTAMPTZ,
  UNIQUE(user_id, listing_id)
)

-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
listing_saves (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  listing_id UUID REFERENCES listings(id),
  created_at TIMESTAMPTZ,
  UNIQUE(user_id, listing_id)
)

-- –ß–∞—Ç-—Ç—Ä–µ–¥—ã
chat_threads (
  id UUID PRIMARY KEY,
  listing_id UUID REFERENCES listings(id),
  buyer_id UUID REFERENCES users(id),
  seller_id UUID REFERENCES users(id),
  last_message_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ
)

-- –°–æ–æ–±—â–µ–Ω–∏—è
chat_messages (
  id UUID PRIMARY KEY,
  thread_id UUID REFERENCES chat_threads(id),
  sender_id UUID REFERENCES users(id),
  body TEXT,
  created_at TIMESTAMPTZ
)

-- –ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç—ã
business_accounts (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  tier VARCHAR,  -- 'free', 'lite', 'business', 'pro'
  company_name VARCHAR,
  max_listings INTEGER,
  max_team_members INTEGER,
  subscription_ends_at TIMESTAMPTZ,
  ...
)

-- –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
verification_codes (
  id UUID PRIMARY KEY,
  phone VARCHAR,
  code VARCHAR,  -- 4 —Ü–∏—Ñ—Ä—ã
  expires_at TIMESTAMPTZ,
  is_used BOOLEAN
)
```

### RLS (Row Level Security)

- **listings:** –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å
- **chat_threads:** –£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
- **chat_messages:** –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç—Ä–µ–¥–∞ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å
- **listing_saves:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
- **users:** –ü—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É

---

## üîÑ REDUX STORE STRUCTURE

```typescript
{
  feed: {
    currentIndex: number,                    // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –≤–∏–¥–µ–æ
    activeCategory: 'car' | 'horse' | 'real_estate',
    preloadedIndexes: number[],              // –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–µ–ª–æ–∞–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
    viewedListings: string[],                // –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    lastViewedTime: Record<string, number>  // ID -> timestamp
  },
  
  video: {
    activeVideoId: string | null,
    playingVideoIds: string[],              // –í–∏–¥–µ–æ –≤ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏
    mutedVideoIds: string[],                // –í–∏–¥–µ–æ –±–µ–∑ –∑–≤—É–∫–∞
    videoCache: {                           // –ö—ç—à URL –≤–∏–¥–µ–æ
      [id: string]: { url: string, cachedAt: number }
    }
  },
  
  auth: {
    currentUser: User | null,
    token: string | null
  },
  
  offline: {
    isOnline: boolean,
    cachedListings: FeedListing[]
  }
}
```

---

## üõ†Ô∏è –¢–ï–•–ù–û–õ–û–ì–ò–ò

### Frontend (Mobile)

- **Framework:** React Native 0.81 + Expo SDK 54
- **Routing:** Expo Router (file-based routing)
- **State Management:** Redux Toolkit + RTK Query
- **UI:** React Native –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + Ionicons
- **Video Player:** expo-video (useVideoPlayer hook)
- **Camera:** expo-camera, expo-image-picker
- **Storage:** AsyncStorage + SQLite (–æ—Ñ—Ñ–ª–∞–π–Ω –∫—ç—à)
- **HTTP Client:** Fetch API + axios
- **Animations:** react-native-reanimated, Animated API
- **Haptics:** expo-haptics
- **Lists:** @shopify/flash-list (–≤–º–µ—Å—Ç–æ FlatList)

### Backend

- **Framework:** Express.js (Node.js 18+)
- **Database:** Supabase (PostgreSQL)
- **Storage:** Supabase Storage (S3-compatible) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Realtime:** Supabase Realtime (WebSocket)
- **Auth:** JWT tokens (—á–µ—Ä–µ–∑ backend)
- **SMS:** nikita.kg API (Basic Auth)
- **Video:** api.video (HLS streaming) ‚Äî **–í–°–ï –≤–∏–¥–µ–æ –∑–¥–µ—Å—å**
- **AI:** OpenAI GPT-4 Vision, Claude (Anthropic), Google Vision API, YOLO (Roboflow)
- **Queue:** Bull (Redis) –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **Database:** Supabase PostgreSQL
- **File Storage:** Supabase Storage (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è), api.video (–≤–∏–¥–µ–æ)
- **CDN:** api.video CDN (–¥–ª—è –≤–∏–¥–µ–æ)
- **Backend Hosting:** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

---

## üîå –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### 1. Supabase

**URL:** `https://thqlfkngyipdscckbhor.supabase.co`  
**–°–µ—Ä–≤–∏—Å:** `services/supabase.ts`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- Authentication (JWT —á–µ—Ä–µ–∑ backend)
- Storage (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞–≤–∞—Ç–∞—Ä—ã)
- Realtime (WebSocket –ø–æ–¥–ø–∏—Å–∫–∏)

### 2. API.video

**Base URL:** `https://ws.api.video`  
**–°–µ—Ä–≤–∏—Å:** `services/apiVideo.ts`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ: `POST /videos`
- –ó–∞–≥—Ä—É–∑–∫–∞: `POST /videos/{videoId}/source`
- HLS URL: `https://cdn.api.video/vod/{videoId}/hls/manifest.m3u8`
- Thumbnail: `https://cdn.api.video/vod/{videoId}/thumbnail.jpg`

**–í–∞–∂–Ω–æ:** –í—Å–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ api.video, –ù–ï Supabase Storage!

### 3. SMS (nikita.kg)

**URL:** `https://smspro.nikita.kg/api/message`  
**–°–µ—Ä–≤–∏—Å:** `backend/services/smsService.ts`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ú–µ—Ç–æ–¥: POST
- Auth: Basic Auth (login/password)
- Sender: `bat-bat.kg`
- –§–æ—Ä–º–∞—Ç: 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥

**–°—Ç—Ä–∞–Ω—ã:** –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω (+996), –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (+7), –†–æ—Å—Å–∏—è (+7), –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω (+998), –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω (+992)

### 4. AI Services

#### OpenAI GPT-4 Vision
- **–ó–∞–¥–∞—á–∞:** –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏/–≥–æ–¥–∞/—Ü–≤–µ—Ç–∞
- **API:** `https://api.openai.com/v1/chat/completions`
- **–ú–æ–¥–µ–ª—å:** `gpt-4o`

#### Claude (Anthropic)
- **–ó–∞–¥–∞—á–∞:** –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Ü–µ–Ω–∫–∞ —Ü–µ–Ω—ã
- **API:** `https://api.anthropic.com/v1/messages`
- **–ú–æ–¥–µ–ª—å:** `claude-sonnet-4-20250514`

#### Google Vision API
- **–ó–∞–¥–∞—á–∞:** OCR (–æ–¥–æ–º–µ—Ç—Ä), Object Detection (–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è)
- **API:** `https://vision.googleapis.com/v1/images:annotate`
- **Features:** TEXT_DETECTION, OBJECT_LOCALIZATION, LABEL_DETECTION

#### YOLO (Roboflow)
- **–ó–∞–¥–∞—á–∞:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –í–∫–ª—é—á–µ–Ω–æ —á–µ—Ä–µ–∑ `TEST_CONFIG.ENABLE_YOLO`

---

## üì± API ENDPOINTS (Backend)

**Base URL:** `http://192.168.1.16:3001/api` (dev) –∏–ª–∏ production URL

### Authentication
```
POST /api/auth/request-code
  Body: { phone: "+996..." }
  Response: { success: true, data: { phone, message } }

POST /api/auth/verify-code
  Body: { phone: "+996...", code: "1234" }
  Response: { success: true, data: { user, token, codeLength } }
```

### Listings
```
GET /api/listings/feed
  Query: { category?: "car"|"horse"|"real_estate", limit, offset }
  Response: { success: true, data: Listing[] }

POST /api/listings
  Headers: { Authorization: "Bearer <token>" }
  Body: { category, video_id, title, price, details, ... }
  Response: { success: true, data: Listing }
```

### Chat
```
POST /api/chat/start
  Body: { listing_id, buyer_id, seller_id }
  Response: { success: true, data: { thread_id } }

GET /api/chat/thread/:id/messages
  Response: { success: true, data: Message[] }

POST /api/chat/thread/:id/message
  Body: { body: "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è" }
  Response: { success: true, data: Message }
```

### AI Analysis
```
POST /api/analyze-car
  Body: { videoFrames: string[] (base64), metadata: {...} }
  Response: { brand, model, year, mileage_km, price_estimate, damages, condition, ... }
```

### Business Accounts
```
GET /api/business/account
  Headers: { Authorization: "Bearer <token>" }
  Response: { success: true, data: BusinessAccount }

POST /api/business/upgrade
  Body: { tier: "lite"|"business"|"pro" }
  Response: { success: true, data: BusinessAccount }
```

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –ê–õ–ì–û–†–ò–¢–ú–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### 1. –ü—Ä–µ–ª–æ–∞–¥–∏–Ω–≥ –≤–∏–¥–µ–æ
- –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ –≤ —Ñ–æ–Ω–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `isPreloaded` —Ñ–ª–∞–≥ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Neural warm-up engine –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞

### 2. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞
- FlashList —Å `windowSize={3}` (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ 3 —ç–∫—Ä–∞–Ω–∞)
- `removeClippedSubviews={true}` –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
- React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redux –∫—ç—à –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- SQLite –∫—ç—à –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
- AsyncStorage –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ö—ç—à –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ 30 —Å–µ–∫—É–Ω–¥

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ö–æ–º–ø—Ä–µ—Å—Å–∏—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é
- Placeholder'—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- expo-image –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 5. –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
- SQLite –∫—ç—à –¥–ª—è –≤–∏–¥–µ–æ URL
- –ö—ç—à –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ Redux
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

---

## üìä –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–æ–ª–∏

1. **–ì–æ—Å—Ç—å** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Äî –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —á–∞—Ç—ã, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
3. **–ü—Ä–æ–¥–∞–≤–µ—Ü** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
4. **–ë–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∫–æ–º–∞–Ω–¥–∞, boost)

### –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

- **Boost —Å–∏—Å—Ç–µ–º–∞** ‚Äî –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (–ø–ª–∞—Ç–Ω–æ)
- **–ë–∏–∑–Ω–µ—Å-–ø–æ–¥–ø–∏—Å–∫–∏** ‚Äî —Ç–∞—Ä–∏—Ñ—ã lite/business/pro
- **–ö–æ–º–∏—Å—Å–∏—è** ‚Äî (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ RLS (Row Level Security) –≤ Supabase
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ backend
- ‚úÖ Rate limiting –¥–ª—è API
- ‚úÖ SMS –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥)
- ‚úÖ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìù –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò

### ‚úÖ DO

- –ò—Å–ø–æ–ª—å–∑—É–π –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (`app/`, `components/`, `services/`)
- –í—Å–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ api.video (–ù–ï Supabase Storage)
- –ò–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ `@` aliases
- TypeScript —Ç–∏–ø—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ–∑–¥–µ
- –ò—Å–ø–æ–ª—å–∑—É–π `listing_likes` —Ç–∞–±–ª–∏—Ü—É, –ù–ï `likes`
- –ò—Å–ø–æ–ª—å–∑—É–π Redux –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- FlashList –≤–º–µ—Å—Ç–æ FlatList –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

### ‚ùå DON'T

- –ù–µ –¥–æ–±–∞–≤–ª—è–π –∫–æ–¥ –≤ `legacy/`
- –ù–µ –¥—É–±–ª–∏—Ä—É–π —Å–µ—Ä–≤–∏—Å—ã –º–µ–∂–¥—É mobile –∏ backend
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π FlatList –¥–ª—è –≤–∏–¥–µ–æ-–ª–µ–Ω—Ç—ã
- –ù–µ —Ö—Ä–∞–Ω–∏ –≤–∏–¥–µ–æ –≤ Supabase Storage
- –ù–µ –¥–µ–ª–∞–π –ø—Ä—è–º—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ services)

---

## üöÄ –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ production –∑–∞–ø—É—Å–∫—É –≤ –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–µ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2025

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **[ARCHITECTURE.md](ARCHITECTURE.md)** ‚Äî –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[CursorAI-Prompt.md](CursorAI-Prompt.md)** ‚Äî –ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI
- **[PROJECT_STRUCTURE.md](../PROJECT_STRUCTURE.md)** ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

**360¬∞ Auto Marketplace** ‚Äî –ì–æ—Ç–æ–≤ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ

