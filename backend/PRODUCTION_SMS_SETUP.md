# ‚úÖ PRODUCTION SMS - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω dev —Ä–µ–∂–∏–º
- `EXPOSE_TEST_SMS_CODE=false` - testCode –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ production
- –í production —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–∞—è SMS –æ—Ç–ø—Ä–∞–≤–∫–∞

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ: `errorCode`, `errorMessage`, `errorDetails`

### 3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω config()
- `config()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ, –¥–æ –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤

## üìã –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```bash
# backend/.env
NODE_ENV=production
EXPOSE_TEST_SMS_CODE=false  # ‚Üê –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è production
SMS_LOGIN=superapp
SMS_PASSWORD=83fb772ee0799a422cce18ffd5f497b9
SMS_SENDER=bat-bat.kg
SMS_API_URL=https://smspro.nikita.kg/api/message
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è":

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞:

```bash
tail -f /tmp/backend.log | grep -E "Failed to create user|errorCode|errorMessage"
```

–í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
- `errorCode` - –∫–æ–¥ –æ—à–∏–±–∫–∏ Supabase
- `errorMessage` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- `errorDetails` - –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
- `newUser` - –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—ã—Ç–∞–ª–∏—Å—å –≤—Å—Ç–∞–≤–∏—Ç—å

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **RLS (Row Level Security)** - —Ç–∞–±–ª–∏—Ü–∞ `users` –º–æ–∂–µ—Ç –∏–º–µ—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã** - –≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
3. **–î—É–±–ª–∏–∫–∞—Ç** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - service role key –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –ø—Ä–∞–≤ –Ω–∞ insert

### –†–µ—à–µ–Ω–∏–µ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - —Ç–∞–º –±—É–¥–µ—Ç —Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `users` –≤ Supabase
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `users`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `SUPABASE_SERVICE_ROLE_KEY` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ insert

## ‚úÖ SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ production:

- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è SMS –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ nikita.kg
- ‚úÖ testCode –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ –≤ development)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production

