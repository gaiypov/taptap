# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SMS –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞** - —Ç–µ–ø–µ—Ä—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –≤ –ë–î** - –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–¥—ã –¥–ª—è –Ω–æ–º–µ—Ä–∞

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–¥–∞:

```bash
tail -f /tmp/backend.log
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
[AuthAPI] Request code for phone: { originalPhone: '+996779728888', normalizedPhone: '+996779728888' }
[AuthService] requestSmsCode called { originalPhone: '+996779728888', formattedPhone: '+996779728888' }
[AuthService] Generated code: 1234
[SMS] sendSms called with phone: 996779728888
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```
[AuthAPI] verify-code called { originalPhone: '+996779728888', normalizedPhone: '+996779728888', code: '1234' }
[AuthService] verifySmsCode called { originalPhone: '+996779728888', code: '1234', codeLength: 4 }
[AuthService] Formatted phone for verification: '+996779728888'
```

### 3. –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:

–í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:
```
[AuthService] Code not found or expired { phone: '+996779728888', code: '1234', ... }
[AuthService] Recent codes for this phone: [ ... ]
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–æ–º–µ—Ä –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è
2. **–ö–æ–¥ –∏—Å—Ç–µ–∫** - –∫–æ–¥ –¥–µ–π—Å—Ç–≤—É–µ—Ç 5 –º–∏–Ω—É—Ç (SMS_CODE_TTL_MINUTES)
3. **–ö–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω** - –∫–∞–∂–¥—ã–π –∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
4. **SMS –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ** - –≤ production —Ä–µ–∂–∏–º–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ nikita.kg

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞
curl -X POST http://localhost:3001/api/auth/request-code \
  -H "Content-Type: application/json" \
  -d '{"phone": "+996779728888"}'

# –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ testCode)
curl -X POST http://localhost:3001/api/auth/verify-code \
  -H "Content-Type: application/json" \
  -d '{"phone": "+996779728888", "code": "1234"}'
```

